(function(e){function t(t){for(var n,o,i=t[0],c=t[1],l=t[2],u=0,d=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);p&&p(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==s[c]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},s={index:0},r=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var p=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("85ec"),s=a.n(n);s.a},3933:function(e,t,a){"use strict";function n(e){return{debug:console.log.bind(this,"[".concat(e,"]")),info:console.log.bind(this,"[".concat(e,"]")),warn:console.log.bind(this,"[".concat(e,"]")),error:console.log.bind(this,"[".concat(e,"]"))}}t["a"]={genModuleLogger:n}},"3ca3":function(e,t,a){"use strict";a("7db0"),a("4160"),a("d3b7"),a("159b");var n,s,r,o,i,c,l,p=a("ade3"),u=a("8144"),d=a("3933"),f=a("cc01"),v=a("2ef0"),m=d["a"].genModuleLogger("db"),y="storageKey",h={devConfSaveTimer:null,accessToken:"",devConf:{controlStyle:u["a"].controlStyle.AP,serverURI:"http://192.168.5.100",baseURI:"http://192.168.5.100",acDevKey:"cassia",acDevSecret:"cassia",mac:"CC:1B:E0:E0:DD:70",filter_name:[],filter_mac:[],filter_rssi:-75,chip:0},devConfDisplayVars:{toolsBinaryConversion:{type:"10",value:""},toolsHexTextConversion:{type:"text",value:""},toolsJsonConversion:{inline:"",format:""},language:"中文",mainWidth:18,isConfigMenuItemOpen:!0,scanFilterNamesInputVisible:!1,scanFilterNamesInputValue:"",scanFilterMacsInputVisible:!1,scanFilterMacsInputValue:"",apiScanFilterNamesInputVisible:!1,apiScanFilterNamesInputValue:"",apiScanFilterMacsInputVisible:!1,apiScanFilterMacsInputValue:"",isScanning:!1,isNotifyOn:!1,isApiScanResultDisplayOn:!0,isApiScanning:!1,apiOutputDisplayCount:20,activeMenuItem:"scanListMenuItem",activeApiTabName:"scan",activeApiDemoTabName:"connectWriteNotify",activeApiOutputTabName:"output",rssiChartStopped:!1,rssiChartSwitch:!1,rssiChartPeriod:60,rssiChartDataSpan:2e3,rssiChartDataCount:30,apiDebuggerParams:(n={},Object(p["a"])(n,u["a"].apiType.SCAN,{chip:0,filter_name:[],filter_mac:[],filter_rssi:-65}),Object(p["a"])(n,u["a"].apiType.CONNECT,{chip:0,deviceMac:"C0:00:5B:D1:AA:BC",addrType:u["a"].deviceAddrType.PUBLIC}),Object(p["a"])(n,u["a"].apiType.READ,{deviceMac:"C0:00:5B:D1:AA:BC",handle:"39"}),Object(p["a"])(n,u["a"].apiType.WRITE,{deviceMac:"C0:00:5B:D1:AA:BC",handle:"39",value:"21ff310302ff31",noresponse:!1}),Object(p["a"])(n,u["a"].apiType.DISCONNECT,{deviceMac:"C0:00:5B:D1:AA:BC"}),n),apiDemoParams:{connectWriteNotify:{connect:{tempFromApiLogUrl:"",chip:0,deviceMac:"C0:00:5B:D1:AA:BC",addrType:u["a"].deviceAddrType.PUBLIC},write:{tempFromApiLogUrl:"",handle:39,value:"21ff310302ff31",noresponse:!1},code:""},scanConnectWriteNotify:{scan:{tempFromApiLogUrl:"",chip:0,filter_name:[],filter_mac:[],filter_rssi:-75},write:{tempFromApiLogUrl:"",handle:39,value:"21ff310302ff31",noresponse:!1},code:""}}}},g=Object(p["a"])({currentConnectedTab:"0",scanDisplayFilterContent:"",connectDisplayFilterContent:"",notifyDisplayFilterContent:"",apiLogDisplayFilterContent:"",isApiDebuggerLoading:!1,isNotifyLoading:!1,devicesConnectLoading:{},apiDebuggerResult:(l={},Object(p["a"])(l,u["a"].apiType.SCAN,{sse:null,resultList:[{time:1582882186095,data:'{"name":"(unknown)","evtType":3,"rssi":-80,"adData":"1EFF06000109200262A12A0E18F1516C3D7DABD42556C51B45E9094EB88D2B","bdaddrs":[{"bdaddr":"76:95:9B:89:BB:A5","bdaddrType":"random"}]}'}],displayResultList:[],code:(s={},Object(p["a"])(s,u["a"].codeType.CURL,""),Object(p["a"])(s,u["a"].codeType.NODEJS,""),s)}),Object(p["a"])(l,u["a"].apiType.CONNECT,{resultList:[],code:(r={},Object(p["a"])(r,u["a"].codeType.CURL,""),Object(p["a"])(r,u["a"].codeType.NODEJS,""),r)}),Object(p["a"])(l,u["a"].apiType.READ,{resultList:[],code:(o={},Object(p["a"])(o,u["a"].codeType.CURL,""),Object(p["a"])(o,u["a"].codeType.NODEJS,""),o)}),Object(p["a"])(l,u["a"].apiType.WRITE,{resultList:[],code:(i={},Object(p["a"])(i,u["a"].codeType.CURL,""),Object(p["a"])(i,u["a"].codeType.NODEJS,""),i)}),Object(p["a"])(l,u["a"].apiType.DISCONNECT,{resultList:[],code:(c={},Object(p["a"])(c,u["a"].codeType.CURL,""),Object(p["a"])(c,u["a"].codeType.NODEJS,""),c)}),l),scanResultList:[],notifyDisplayResultList:[],apiLogResultList:[],scanDisplayResultList:[],scanDevicesRssiHistory:{},connectedList:[],devicesServiceList:{},notifyResultList:[]},"notifyDisplayResultList",[]);function C(e,t){window.localStorage.setItem(e,t)}function D(e){return window.localStorage.getItem(e)}function b(e){var t=e.serverURI;return e.controlStyle===u["a"].controlStyle.AC&&(t+="/api"),t}function S(e){e.baseURI=b(e),h.devConf=e,C(y,JSON.stringify(h))}function A(e){return e.baseURI=b(e),h.devConf=e,new Promise((function(t,a){f["a"].getAccessToken(e.baseURI,e.acDevKey,e.acDevSecret).then((function(e){h.accessToken=e.access_token,C(y,JSON.stringify(h)),t()})).catch((function(e){a(e)}))}))}function w(e){clearTimeout(h.devConfSaveTimer),h.devConfSaveTimer=setTimeout((function(){return m.info("save dev conf:",e),e.controlStyle===u["a"].controlStyle.AC?A(e):S(e)}),1e3)}function T(){return h.devConf}function x(){return h.devConfDisplayVars}function N(){return g}function R(){return h}function V(){h=JSON.parse(D(y))||h}function I(e,t,a){var n=v.find(e,t);n?v.forEach(a,(function(e,t){n[t]=e})):e.push(a)}t["a"]={save:C,get:D,saveDevConf:w,getDevConf:T,storage:h,cache:g,loadStorage:V,getCache:N,getStorage:R,getDevConfDisplayVars:x,listAddOrUpdate:I}},"4fbc":function(e,t,a){"use strict";a("7db0"),a("b0c0");var n=a("8144"),s=a("3933"),r=a("cc01"),o=a("3ca3"),i=a("d378"),c=a("56d7"),l=a("2ef0"),p=s["a"].genModuleLogger("scan"),u=null;function d(e){var t=o["a"].getCache(),a=o["a"].getStorage(),n=JSON.parse(e.data),s=n.bdaddrs[0],r=s.bdaddr,i=s.bdaddrType,p=l.find(t.scanResultList,{mac:r});p?("(unknown)"!==n.name&&(p.name=n.name),p.rssi=n.rssi):t.scanResultList.push({mac:r,name:n.name,adData:n.adData,bdaddrType:i,rssi:n.rssi}),a.devConfDisplayVars.rssiChartSwitch&&(t.scanDevicesRssiHistory[r]?t.scanDevicesRssiHistory[r].push({time:Date.now(),rssi:n.rssi}):c["default"].setObjProperty(t.scanDevicesRssiHistory,r,[{time:Date.now(),rssi:n.rssi}]))}function f(e){p.error("scan sse error:",e),i["a"].notify("停止扫描，扫描SSE异常: ".concat(e.message||JSON.stringify(e)),"服务异常",n["a"].messageType.ERROR),u.close(),u=null}function v(e){return u||(u=r["a"].startScanByDevConf(e,d,f),u)}function m(){u&&(u.close(),u=null),i["a"].notify("停止扫描成功","操作成功",n["a"].messageType.SUCCESS)}t["a"]={startScan:v,stopScan:m}},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=(a("9e1f"),a("450d"),a("6ed5")),r=a.n(s),o=(a("46a1"),a("e5f2")),i=a.n(o),c=(a("cbb5"),a("8bbc")),l=a.n(c),p=(a("5466"),a("ecdf")),u=a.n(p),d=(a("38a0"),a("ad41")),f=a.n(d),v=(a("06f1"),a("6ac9")),m=a.n(v),y=(a("b0ee"),a("d180")),h=a.n(y),g=(a("a335"),a("c0bb")),C=a.n(g),D=(a("ae26"),a("845f")),b=a.n(D),S=(a("6611"),a("e772")),A=a.n(S),w=(a("e612"),a("dd87")),T=a.n(w),x=(a("075a"),a("72aa")),N=a.n(x),R=(a("8bd8"),a("4cb2")),V=a.n(R),I=(a("4ca3"),a("443e")),E=a.n(I),L=(a("fd71"),a("a447")),P=a.n(L),_=(a("960d"),a("defb")),O=a.n(_),M=(a("bd49"),a("18ff")),B=a.n(M),k=(a("cb70"),a("b370")),U=a.n(k),F=(a("b5c2"),a("20cf")),W=a.n(F),j=(a("3c52"),a("0d7b")),z=a.n(j),H=(a("fe07"),a("6ac5")),$=a.n(H),G=(a("10cb"),a("f3ad")),J=a.n(G),q=(a("e3ea"),a("7bc3")),K=a.n(q),X=(a("eca7"),a("3787")),Y=a.n(X),Z=(a("425f"),a("4105")),Q=a.n(Z),ee=(a("f4f9"),a("c2cc")),te=a.n(ee),ae=(a("7a0f"),a("0f6c")),ne=a.n(ae),se=(a("1951"),a("eedf")),re=a.n(se),oe=(a("1f1a"),a("4e4b")),ie=a.n(oe),ce=(a("1760"),a("9883")),le=a.n(ce),pe=(a("bdc7"),a("aa2f")),ue=a.n(pe),de=(a("de31"),a("c69e")),fe=a.n(de),ve=(a("a769"),a("5cc3")),me=a.n(ve),ye=(a("a673"),a("7b31")),he=a.n(ye),ge=(a("adec"),a("3d2d")),Ce=a.n(ge),De=(a("b8e0"),a("a4c4")),be=a.n(De);n["default"].use(be.a),n["default"].use(Ce.a),n["default"].use(he.a),n["default"].use(me.a),n["default"].use(fe.a),n["default"].use(ue.a),n["default"].use(le.a),n["default"].use(ie.a),n["default"].use(re.a),n["default"].use(ne.a),n["default"].use(te.a),n["default"].use(Q.a),n["default"].use(Y.a),n["default"].use(K.a),n["default"].use(J.a),n["default"].use($.a),n["default"].use(z.a),n["default"].use(W.a),n["default"].use(U.a),n["default"].use(B.a),n["default"].use(O.a),n["default"].use(P.a),n["default"].use(E.a),n["default"].use(V.a),n["default"].use(N.a),n["default"].use(T.a),n["default"].use(A.a),n["default"].use(b.a),n["default"].use(C.a),n["default"].use(h.a),n["default"].use(m.a),n["default"].use(f.a),n["default"].use(u.a),n["default"].use(l.a),n["default"].prototype.$notify=i.a,n["default"].prototype.$confirm=r.a.confirm;a("c695");var Se=a("cf75"),Ae=a.n(Se),we=(a("5d37"),a("c964")),Te=a("f0f8"),xe=a.n(Te),Ne=a("4dd1"),Re=a.n(Ne),Ve=(a("8da8"),a("9ca8")),Ie=(a("ef97"),a("0b4b"),a("d28f"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-container",{staticStyle:{height:"100%"}},[a("el-header",{staticStyle:{height:"70px","background-color":"#409eff",color:"#fff","padding-left":"30px","vertical-align":"middle","line-height":"70px","border-bottom":"1px solid #ddd"}},[a("span",{staticStyle:{"font-size":"20px"}},[e._v("Cassia蓝牙调试工具")]),a("span",{staticStyle:{float:"right"}},[e._v("Language "),a("el-select",{staticStyle:{width:"120px","padding-right":"15px"},attrs:{size:"small"},model:{value:e.store.devConfDisplayVars.language,callback:function(t){e.$set(e.store.devConfDisplayVars,"language",t)},expression:"store.devConfDisplayVars.language"}},[a("el-option",{attrs:{label:"中文",value:"中文"}}),a("el-option",{attrs:{label:"English",value:"English"}})],1)],1)]),a("el-container",[a("el-aside",{directives:[{name:"show",rawName:"v-show",value:this.store.devConfDisplayVars.isConfigMenuItemOpen,expression:"this.store.devConfDisplayVars.isConfigMenuItemOpen"}],staticStyle:{"border-right":"1px solid #f2f2f2"},attrs:{width:"350px"}},[a("el-container",{staticStyle:{height:"100%"}},[a("el-main",[a("el-form",{attrs:{"label-width":"80px",size:"small"}},[a("el-row",{staticStyle:{"font-size":"16px","border-bottom":"1px solid #ddd","margin-top":"30px"}},[a("span",[e._v("配置连接配置")])]),a("el-form-item",{staticStyle:{"margin-top":"15px"},attrs:{label:"连接方式"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.store.devConf.controlStyle,callback:function(t){e.$set(e.store.devConf,"controlStyle",t)},expression:"store.devConf.controlStyle"}},[a("el-option",{attrs:{label:"ap",value:"ap"}}),a("el-option",{attrs:{label:"ac",value:"ac"}})],1)],1),a("el-form-item",{staticStyle:{"margin-top":"15px"},attrs:{label:"服务URL"}},[a("el-input",{staticClass:"server-ip",attrs:{clearable:"",placeholder:"http://192.168.0.100"},model:{value:e.store.devConf.serverURI,callback:function(t){e.$set(e.store.devConf,"serverURI",t)},expression:"store.devConf.serverURI"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ac"===e.store.devConf.controlStyle,expression:"store.devConf.controlStyle === 'ac'"}],staticStyle:{"margin-top":"15px"},attrs:{label:"开发账号"}},[a("el-input",{staticClass:"ac-dev-key",model:{value:e.store.devConf.acDevKey,callback:function(t){e.$set(e.store.devConf,"acDevKey",t)},expression:"store.devConf.acDevKey"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ac"===e.store.devConf.controlStyle,expression:"store.devConf.controlStyle === 'ac'"}],staticStyle:{"margin-top":"15px"},attrs:{label:"开发密码"}},[a("el-input",{staticClass:"ac-dev-secret",model:{value:e.store.devConf.acDevSecret,callback:function(t){e.$set(e.store.devConf,"acDevSecret",t)},expression:"store.devConf.acDevSecret"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"ac"===e.store.devConf.controlStyle,expression:"store.devConf.controlStyle === 'ac'"}],staticStyle:{"margin-top":"15px"},attrs:{label:"AP MAC"}},[a("el-input",{staticClass:"ap-mac",attrs:{placeholder:"CC:1B:E0:E0:DD:70"},model:{value:e.store.devConf.mac,callback:function(t){e.$set(e.store.devConf,"mac",t)},expression:"store.devConf.mac"}})],1),a("el-row",{staticStyle:{"font-size":"16px","border-bottom":"1px solid #ddd","margin-top":"50px"}},[a("span",[e._v("配置扫描参数")])]),a("el-form-item",{staticStyle:{"margin-top":"15px"},attrs:{label:"使用芯片"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.store.devConf.chip,callback:function(t){e.$set(e.store.devConf,"chip",t)},expression:"store.devConf.chip"}},[a("el-option",{attrs:{label:"0",value:"0"}}),a("el-option",{attrs:{label:"1",value:"1"}})],1)],1),a("el-form-item",{staticStyle:{"margin-top":"15px"},attrs:{label:"过滤名称"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",multiple:"",filterable:"","allow-create":"","default-first-option":""},model:{value:e.store.devConf.filter_name,callback:function(t){e.$set(e.store.devConf,"filter_name",t)},expression:"store.devConf.filter_name"}})],1),a("el-form-item",{attrs:{label:"过滤MAC"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",multiple:"",filterable:"","allow-create":"","default-first-option":""},model:{value:e.store.devConf.filter_mac,callback:function(t){e.$set(e.store.devConf,"filter_mac",t)},expression:"store.devConf.filter_mac"}})],1),a("el-form-item",{attrs:{label:"过滤RSSI"}},[a("el-slider",{attrs:{min:-85,max:0},model:{value:e.store.devConf.filter_rssi,callback:function(t){e.$set(e.store.devConf,"filter_rssi",t)},expression:"store.devConf.filter_rssi"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"danger"}},[e._v("重启 AP")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.store.devConfDisplayVars.isScanning,expression:"!store.devConfDisplayVars.isScanning"}],attrs:{type:"primary",size:"small"},on:{click:e.startScan}},[e._v("开始扫描")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.store.devConfDisplayVars.isScanning,expression:"store.devConfDisplayVars.isScanning"}],attrs:{type:"danger",size:"small"},on:{click:e.stopScan}},[e._v("停止扫描")])],1)],1)],1)],1)],1),a("el-main",{staticStyle:{"background-color":"#fff",padding:"0"}},[a("el-container",{staticStyle:{height:"100%","background-color":"#fff"}},[a("el-aside",{staticStyle:{"background-color":"#fff"},attrs:{width:"110px"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{collapse:"","background-color":e.store.devConfDisplayVars.isConfigMenuItemOpen?"#fff":"#f5f5f5","text-color":"#fff","active-text-color":"#2897ff","default-active":"scanListMenuItem"},on:{select:e.menuSelect}},[a("el-menu-item",{attrs:{index:"configMenuItem"}},[a("i",{staticClass:"el-icon-s-fold"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("配置参数")])]),a("el-menu-item",{attrs:{index:"scanListMenuItem"}},[a("i",{staticClass:"el-icon-search"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("扫描列表")])]),a("el-menu-item",{attrs:{index:"connectListMenuItem"}},[a("i",{staticClass:"el-icon-connection"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("连接列表")])]),a("el-menu-item",{attrs:{index:"notifyListMenuItem"}},[a("i",{staticClass:"el-icon-message-solid"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("通知列表")])]),a("el-menu-item",{attrs:{index:"apiLogListMenuItem"}},[a("i",{staticClass:"el-icon-s-order"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("接口日志")])]),a("el-menu-item",{attrs:{index:"apiDebuggerMenuItem"}},[a("i",{staticClass:"el-icon-service"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("接口调试")])]),a("el-menu-item",{attrs:{index:"apiDemoMenuItem"}},[a("i",{staticClass:"el-icon-magic-stick"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("场景示例")])]),a("el-menu-item",{attrs:{index:"toolsMenuItem"}},[a("i",{staticClass:"el-icon-s-tools"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("常用工具")])])],1)],1),a("el-main",{staticStyle:{height:"100%"}},[a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:"scanListMenuItem"===e.store.devConfDisplayVars.activeMenuItem,expression:"store.devConfDisplayVars.activeMenuItem === 'scanListMenuItem'"}],staticStyle:{"background-color":"#fff"},on:{"tab-click":e.scanTabsClick}},[a("el-tab-pane",{staticStyle:{height:"100%","background-color":"#fff"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-s-data"}),e._v(" 扫描结果")]),a("vxe-toolbar",{scopedSlots:e._u([{key:"buttons",fn:function(){return[a("span",[e._v("扫描设备数量:"),a("span",{staticStyle:{"font-weight":"bold",color:"#409eff"}},[e._v(e._s(e.getComputedScanDisplayResultList.length)+" ")])]),a("vxe-input",{attrs:{type:"search",placeholder:"搜索mac或name",size:"small"},model:{value:e.cache.scanDisplayFilterContent,callback:function(t){e.$set(e.cache,"scanDisplayFilterContent",t)},expression:"cache.scanDisplayFilterContent"}}),a("vxe-button",{attrs:{status:"primary",size:"small"},on:{click:e.scanDisplayResultExport}},[e._v("导出")]),a("vxe-button",{attrs:{status:"danger",size:"small"},on:{click:e.scanDisplayResultClear}},[e._v("清空")])]},proxy:!0}])}),a("vxe-grid",{ref:"refScanDisplayResultGrid",attrs:{border:"none","show-overflow":"",stripe:"","highlight-hover-row":"",height:"560px","sort-config":{trigger:"cell"},data:e.getComputedScanDisplayResultList}},[a("vxe-table-column",{attrs:{field:"name",title:"NAME",type:"html",width:"25%",sortable:""}}),a("vxe-table-column",{attrs:{field:"mac",title:"MAC",type:"html",width:"30%","show-overflow":""}}),a("vxe-table-column",{attrs:{field:"bdaddrType",title:"类型",width:"15%",sortable:""}}),a("vxe-table-column",{attrs:{field:"rssi",title:"信号",width:"15%",sortable:""}}),a("vxe-table-column",{attrs:{title:"操作",width:"15%"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("vxe-button",{attrs:{status:"primary",size:"small",loading:e.cache.devicesConnectLoading[n.mac]},on:{click:function(t){return e.connectDeviceByRow(n,n.mac)}}},[e._v("连接")])]}}])})],1)],1),a("el-tab-pane",{staticStyle:{width:"100%"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-pie-chart"}),e._v(" RSSI图表")]),a("el-row",[a("el-form",{attrs:{inline:"",size:"small"}},[a("el-form-item",{attrs:{label:"统计周期"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"统计周期"},model:{value:e.store.devConfDisplayVars.rssiChartPeriod,callback:function(t){e.$set(e.store.devConfDisplayVars,"rssiChartPeriod",t)},expression:"store.devConfDisplayVars.rssiChartPeriod"}},[a("el-option",{attrs:{label:"60秒",value:"60"}})],1)],1),a("el-form-item",{attrs:{label:"统计间隔"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"统计间隔"},on:{change:e.rssiChartDataSpanChange},model:{value:e.store.devConfDisplayVars.rssiChartDataSpan,callback:function(t){e.$set(e.store.devConfDisplayVars,"rssiChartDataSpan",t)},expression:"store.devConfDisplayVars.rssiChartDataSpan"}},[a("el-option",{attrs:{label:"200毫秒",value:"200"}}),a("el-option",{attrs:{label:"500毫秒",value:"500"}}),a("el-option",{attrs:{label:"1秒",value:"1000"}}),a("el-option",{attrs:{label:"2秒",value:"2000"}}),a("el-option",{attrs:{label:"5秒",value:"5000"}}),a("el-option",{attrs:{label:"10秒",value:"10000"}}),a("el-option",{attrs:{label:"30秒",value:"30000"}})],1)],1),a("el-form-item",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.store.devConfDisplayVars.rssiChartSwitch,expression:"!store.devConfDisplayVars.rssiChartSwitch"}],attrs:{size:"small",type:"primary"},on:{click:e.destoryAndCreateRssiChart}},[e._v("开启")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.store.devConfDisplayVars.rssiChartSwitch&&!e.store.devConfDisplayVars.rssiChartStopped,expression:"store.devConfDisplayVars.rssiChartSwitch && !store.devConfDisplayVars.rssiChartStopped"}],attrs:{size:"small",type:"primary"},on:{click:e.stopRssiChart}},[e._v("暂停")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.store.devConfDisplayVars.rssiChartSwitch&&e.store.devConfDisplayVars.rssiChartStopped,expression:"store.devConfDisplayVars.rssiChartSwitch && store.devConfDisplayVars.rssiChartStopped"}],attrs:{size:"small",type:"primary"},on:{click:e.startRssiChart}},[e._v("继续")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.store.devConfDisplayVars.rssiChartSwitch,expression:"store.devConfDisplayVars.rssiChartSwitch"}],attrs:{size:"small",type:"primary"},on:{click:e.destoryRssiChart}},[e._v("关闭")])],1)],1)],1),a("v-chart",{ref:"rssiChart",staticStyle:{width:"100%",height:"500px"},attrs:{options:e.chartOptions,autoresize:!0}})],1)],1),a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:"connectListMenuItem"===e.store.devConfDisplayVars.activeMenuItem,expression:"store.devConfDisplayVars.activeMenuItem === 'connectListMenuItem'"}],attrs:{closable:""},on:{"tab-remove":e.connectedListTabRemove},model:{value:e.cache.currentConnectedTab,callback:function(t){e.$set(e.cache,"currentConnectedTab",t)},expression:"cache.currentConnectedTab"}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-s-data"}),e._v(" 连接列表")]),a("vxe-toolbar",{scopedSlots:e._u([{key:"buttons",fn:function(){return[a("span",[e._v("连接设备数量:"),a("span",{staticStyle:{"font-weight":"bold",color:"#409eff"}},[e._v(e._s(e.getComputedConnectDisplayResultList().length)+" ")])]),a("vxe-input",{attrs:{type:"search",placeholder:"搜索mac或name",size:"small"},model:{value:e.cache.connectDisplayFilterContent,callback:function(t){e.$set(e.cache,"connectDisplayFilterContent",t)},expression:"cache.connectDisplayFilterContent"}}),a("vxe-button",{attrs:{status:"primary",size:"small"},on:{click:e.connectDisplayResultExport}},[e._v("导出")]),a("vxe-button",{attrs:{status:"danger",size:"small"}},[e._v("清空")])]},proxy:!0}])}),a("vxe-grid",{ref:"refConnectDisplayResultGrid",attrs:{border:"none","show-overflow":"",stripe:"","highlight-hover-row":"",height:"560px","sort-config":{trigger:"cell"},data:e.getComputedConnectDisplayResultList()}},[a("vxe-table-column",{attrs:{field:"name",title:"名称",type:"html",width:"15%",sortable:""}}),a("vxe-table-column",{attrs:{field:"mac",title:"地址",type:"html",width:"20%","show-overflow":""}}),a("vxe-table-column",{attrs:{field:"chip",title:"芯片",type:"html",width:"15%",sortable:""}}),a("vxe-table-column",{attrs:{field:"bdaddrType",title:"类型",width:"15%",sortable:""}}),a("vxe-table-column",{attrs:{title:"操作",width:"35%"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getDeviceServices(n.mac)}}},[e._v("服务")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.disconnectDevice(n.mac)}}},[e._v("断连")]),a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("配对")]),a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("取消配对")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.exportDeviceServices(e.device.mac)}}},[e._v("导出")])],1)]}}])})],1)],1),e._l(e.cache.connectedList,(function(t,n){return a("el-tab-pane",{key:t.mac,attrs:{name:t.mac}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-connection"}),e._v(" "+e._s(t.mac))]),a("el-row",{staticStyle:{"background-color":"#409eff","font-size":"14px","font-style":"normal","border-radius":"3px",color:"#fff",height:"60px",display:"flex","align-items":"center","padding-left":"15px","padding-right":"15px"}},[a("el-col",{attrs:{span:6}},[a("el-row",[e._v(e._s(t.name))]),a("el-row",{staticStyle:{"font-style":"normal"}},[e._v(e._s(t.mac))])],1),a("el-col",{attrs:{span:3}},[e._v(e._s(t.bdaddrType))]),a("el-col",{attrs:{span:3}},[e._v("chip"+e._s(t.chip))]),a("el-col",{attrs:{span:12}},[a("el-button-group",{staticStyle:{float:"right"}},[a("el-button",{staticStyle:{color:"#2897ff"},attrs:{size:"small"},on:{click:function(a){return e.getDeviceServices(t.mac)}}},[e._v("服务")]),a("el-button",{staticStyle:{color:"#2897ff"},attrs:{size:"small"},on:{click:function(a){return e.disconnectDevice(t.mac)}}},[e._v("断连")]),a("el-button",{staticStyle:{color:"#2897ff"},attrs:{size:"small"}},[e._v("配对")]),a("el-button",{staticStyle:{color:"#2897ff"},attrs:{size:"small"}},[e._v("取消配对")]),a("el-button",{staticStyle:{color:"#2897ff"},attrs:{size:"small"},on:{click:function(a){return e.exportDeviceServices(t.mac)}}},[e._v("导出")])],1)],1)],1),a("el-row",{staticStyle:{"padding-left":"0px","margin-top":"15px"}},[a("el-collapse",e._l(e.cache.devicesServiceList[t.mac],(function(n,s){return a("el-collapse-item",{key:n.uuid},[a("template",{slot:"title"},[a("el-col",{staticStyle:{"padding-left":"5px","font-size":"14px","font-style":"normal"}},[e._v(e._s(n.uuid))]),a("el-col",{staticStyle:{float:"right","font-size":"14px","font-style":"normal"}},[e._v(e._s(n.name))])],1),e._l(n.characteristics,(function(n,s){return a("el-row",{key:n.uuid,staticStyle:{"background-color":"#e6e6e6",padding:"15px","border-bottom":"1px solid #fff"},attrs:{title:"char.name"}},[a("el-row",{staticStyle:{"font-size":"14px","font-weight":"bold","font-style":"normal"}},[e._v(e._s(n.name))]),a("el-row",{staticStyle:{"font-size":"12px","font-style":"normal"}},[e._v("UUID: "+e._s(n.uuid))]),a("el-row",{staticStyle:{"font-size":"12px","font-style":"normal"}},[e._v("HANDLE: "+e._s(n.handle))]),a("el-row",{staticStyle:{"font-size":"12px","font-style":"normal"}},[e._v(" Properties: "),a("el-button-group",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:n.propertiesStr.includes("READ"),expression:"char.propertiesStr.includes('READ')"}],staticStyle:{"font-style":"normal","font-weight":"bold"},attrs:{type:"primary",size:"small"},on:{click:function(a){return e.propertyClick("READ",t.mac,n)}}},[e._v(" READ ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:n.propertiesStr.includes("NOTIFY"),expression:"char.propertiesStr.includes('NOTIFY')"}],staticStyle:{"font-style":"normal","font-weight":"bold"},attrs:{type:"on"===n.notifyStatus?"primary":"info",size:"small"},on:{click:function(a){return e.propertyClick("NOTIFY",t.mac,n)}}},[e._v(" NOTIFY ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:n.propertiesStr.includes("WRITE NO RES"),expression:"char.propertiesStr.includes('WRITE NO RES')"}],staticStyle:{"font-style":"normal","font-weight":"bold"},attrs:{type:"primary",size:"small"},on:{click:function(a){return e.propertyClick("WRITE NO RES",t.mac,n)}}},[e._v(" WRITE NO RES ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:n.propertiesStr.includes("WRITE"),expression:"char.propertiesStr.includes('WRITE')"}],staticStyle:{"font-style":"normal","font-weight":"bold"},attrs:{type:"primary",size:"small"},on:{click:function(a){return e.propertyClick("WRITE",t.mac,n)}}},[e._v(" WRITE ")])],1),a("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:n.propertiesStr.includes("WRITE")||n.propertiesStr.includes("WRITE NO RES"),expression:"char.propertiesStr.includes('WRITE') || char.propertiesStr.includes('WRITE NO RES')"}],staticStyle:{float:"right"},attrs:{size:"small"},model:{value:n.writeValueType,callback:function(t){e.$set(n,"writeValueType",t)},expression:"char.writeValueType"}},[a("el-radio-button",{attrs:{label:"hex"}},[e._v("HEX")]),a("el-radio-button",{attrs:{label:"text"}},[e._v("TEXT")])],1),a("el-input",{directives:[{name:"show",rawName:"v-show",value:n.propertiesStr.includes("WRITE")||n.propertiesStr.includes("WRITE NO RES"),expression:"char.propertiesStr.includes('WRITE') || char.propertiesStr.includes('WRITE NO RES')"}],staticStyle:{width:"220px",float:"right","font-size":"12px","font-style":"normal"},attrs:{size:"small",placeholder:"hex"===n.writeValueType?"格式：aa00bb11cc22（支持空格）":"格式：任意字符"},model:{value:n.writeValue,callback:function(t){e.$set(n,"writeValue",t)},expression:"char.writeValue"}})],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:0!==n.readValue.toString().length,expression:"char.readValue.toString().length !== 0"}],staticStyle:{"font-size":"12px","font-style":"normal",color:"#409eff"}},[e._v(" Value: (0x) "),a("el-popover",{attrs:{trigger:"click",width:"600",placement:"right"}},[a("el-table",{attrs:{data:n.parsedReadValues,width:"100%",stripe:"","empty-text":"暂未添加解析"}},[a("el-table-column",{attrs:{label:"字段",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}],null,!0)}),a("el-table-column",{attrs:{label:"解析",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.parsed))])]}}],null,!0)}),a("el-table-column",{attrs:{label:"HEX(0x)",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.raw))])]}}],null,!0)})],1),a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(" "+e._s(n.readValue)+" ")])],1)],1)],1)}))],2)})),1)],1)],1)}))],2),a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:"notifyListMenuItem"===e.store.devConfDisplayVars.activeMenuItem,expression:"store.devConfDisplayVars.activeMenuItem === 'notifyListMenuItem'"}]},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-connection"}),e._v(" 通知列表")]),a("el-row",[a("vxe-toolbar",{scopedSlots:e._u([{key:"buttons",fn:function(){return[a("span",[e._v("设备通知数量:"),a("span",{staticStyle:{"font-weight":"bold",color:"#409eff"}},[e._v(e._s(e.getComputedNotifyDisplayResultList.length)+" ")])]),a("vxe-input",{attrs:{type:"search",placeholder:"搜索mac",size:"small"},model:{value:e.cache.notifyDisplayFilterContent,callback:function(t){e.$set(e.cache,"notifyDisplayFilterContent",t)},expression:"cache.notifyDisplayFilterContent"}}),a("vxe-button",{directives:[{name:"show",rawName:"v-show",value:!e.store.devConfDisplayVars.isNotifyOn,expression:"!store.devConfDisplayVars.isNotifyOn"}],attrs:{status:"primary",size:"small"},on:{click:e.openNotify}},[e._v("开启")]),a("vxe-button",{directives:[{name:"show",rawName:"v-show",value:e.store.devConfDisplayVars.isNotifyOn,expression:"store.devConfDisplayVars.isNotifyOn"}],attrs:{status:"danger",size:"small"},on:{click:e.closeNotify}},[e._v("关闭")]),a("vxe-button",{attrs:{status:"primary",size:"small"},on:{click:e.notifyDisplayResultExport}},[e._v("导出")]),a("vxe-button",{attrs:{status:"danger",size:"small"},on:{click:e.notifyDisplayResultClear}},[e._v("清空")])]},proxy:!0}])}),a("vxe-grid",{ref:"refNotifyDisplayResultGrid",attrs:{border:"none","show-overflow":"",stripe:"",height:"560px","highlight-hover-row":"","sort-config":{trigger:"cell"},data:e.getComputedNotifyDisplayResultList}},[a("vxe-table-column",{attrs:{field:"time",title:"时间戳",type:"html",width:"20%",sortable:""}}),a("vxe-table-column",{attrs:{field:"mac",title:"地址",type:"html",width:"30%","show-overflow":""}}),a("vxe-table-column",{attrs:{field:"handle",title:"HANDLE",width:"10%"}}),a("vxe-table-column",{attrs:{field:"value",title:"VALUE",width:"40%","show-overflow":""}})],1)],1)],1)],1),a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:"apiDebuggerMenuItem"===e.store.devConfDisplayVars.activeMenuItem,expression:"store.devConfDisplayVars.activeMenuItem === 'apiDebuggerMenuItem'"}],model:{value:e.store.devConfDisplayVars.activeApiTabName,callback:function(t){e.$set(e.store.devConfDisplayVars,"activeApiTabName",t)},expression:"store.devConfDisplayVars.activeApiTabName"}},[a("el-tab-pane",{attrs:{name:"scan"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-search"}),e._v(" 扫描设备")]),a("el-form",{staticStyle:{"margin-top":"15px"},attrs:{"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"使用芯片"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName].chip,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName],"chip",t)},expression:"store.devConfDisplayVars.apiDebuggerParams[store.devConfDisplayVars.activeApiTabName].chip"}},[a("el-radio-button",{attrs:{label:0}},[e._v("芯片0")]),a("el-radio-button",{attrs:{label:1}},[e._v("芯片1")])],1)],1),a("el-form-item",{attrs:{label:"过滤名称"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",multiple:"",filterable:"","allow-create":"","default-first-option":""},model:{value:e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName].filter_name,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName],"filter_name",t)},expression:"store.devConfDisplayVars.apiDebuggerParams[store.devConfDisplayVars.activeApiTabName].filter_name"}})],1),a("el-form-item",{attrs:{label:"过滤MAC"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",multiple:"",filterable:"","allow-create":"","default-first-option":""},model:{value:e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName].filter_mac,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName],"filter_mac",t)},expression:"store.devConfDisplayVars.apiDebuggerParams[store.devConfDisplayVars.activeApiTabName].filter_mac"}})],1),a("el-form-item",{attrs:{label:"过滤RSSI"}},[a("el-slider",{attrs:{"show-input":"",min:-85,max:0},model:{value:e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName].filter_rssi,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName],"filter_rssi",t)},expression:"store.devConfDisplayVars.apiDebuggerParams[store.devConfDisplayVars.activeApiTabName].filter_rssi"}})],1),a("el-form-item",{attrs:{align:"left"}},[a("el-button-group",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.store.devConfDisplayVars.isApiScanning,expression:"!store.devConfDisplayVars.isApiScanning"}],attrs:{type:"primary",size:"small"},on:{click:e.startDebugApi}},[e._v("开始调试")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.store.devConfDisplayVars.isApiScanning,expression:"store.devConfDisplayVars.isApiScanning"}],attrs:{type:"danger",size:"small"},on:{click:e.stopApiScan}},[e._v("停止扫描")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.genCode}},[e._v("生成代码")])],1)],1)],1)],1),a("el-tab-pane",{attrs:{name:"connect"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-connection"}),e._v(" 连接设备")]),a("el-form",{staticStyle:{"margin-top":"15px"},attrs:{"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"使用芯片"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName].chip,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName],"chip",t)},expression:"store.devConfDisplayVars.apiDebuggerParams[store.devConfDisplayVars.activeApiTabName].chip"}},[a("el-radio-button",{attrs:{label:"0"}},[e._v("芯片0")]),a("el-radio-button",{attrs:{label:"1"}},[e._v("芯片1")])],1)],1),a("el-form-item",{attrs:{label:"地址类型"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName].addrType,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName],"addrType",t)},expression:"store.devConfDisplayVars.apiDebuggerParams[store.devConfDisplayVars.activeApiTabName].addrType"}},[a("el-radio-button",{attrs:{label:"public"}},[e._v("PUBLIC")]),a("el-radio-button",{attrs:{label:"random"}},[e._v("RANDOM")])],1)],1),a("el-form-item",{attrs:{label:"设备地址"}},[a("el-input",{model:{value:e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName].deviceMac,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName],"deviceMac",t)},expression:"store.devConfDisplayVars.apiDebuggerParams[store.devConfDisplayVars.activeApiTabName].deviceMac"}})],1),a("el-form-item",{attrs:{align:"left"}},[a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.startDebugApi}},[e._v("开始调试")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.genCode}},[e._v("生成代码")])],1)],1)],1)],1),a("el-tab-pane",{attrs:{name:"read"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-reading"}),e._v(" 读取数据")]),a("el-form",{staticStyle:{"margin-top":"15px"},attrs:{"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"HANDLE"}},[a("el-input",{model:{value:e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName].handle,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName],"handle",t)},expression:"store.devConfDisplayVars.apiDebuggerParams[store.devConfDisplayVars.activeApiTabName].handle"}})],1),a("el-form-item",{attrs:{label:"设备地址"}},[a("el-input",{model:{value:e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName].deviceMac,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName],"deviceMac",t)},expression:"store.devConfDisplayVars.apiDebuggerParams[store.devConfDisplayVars.activeApiTabName].deviceMac"}})],1),a("el-form-item",{attrs:{align:"left"}},[a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.startDebugApi}},[e._v("开始调试")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.genCode}},[e._v("生成代码")])],1)],1)],1)],1),a("el-tab-pane",{attrs:{name:"write"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-edit-outline"}),e._v(" 写入数据")]),a("el-form",{staticStyle:{"margin-top":"15px"},attrs:{"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"HANDLE"}},[a("el-input",{model:{value:e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName].handle,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName],"handle",t)},expression:"store.devConfDisplayVars.apiDebuggerParams[store.devConfDisplayVars.activeApiTabName].handle"}})],1),a("el-form-item",{attrs:{label:"VALUE"}},[a("el-input",{model:{value:e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName].value,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName],"value",t)},expression:"store.devConfDisplayVars.apiDebuggerParams[store.devConfDisplayVars.activeApiTabName].value"}})],1),a("el-form-item",{attrs:{label:"写入方式"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName].noresponse,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName],"noresponse",t)},expression:"store.devConfDisplayVars.apiDebuggerParams[store.devConfDisplayVars.activeApiTabName].noresponse"}},[a("el-radio-button",{attrs:{label:"false"}},[e._v("等待")]),a("el-radio-button",{attrs:{label:"true"}},[e._v("不等待")])],1)],1),a("el-form-item",{attrs:{label:"设备地址"}},[a("el-input",{model:{value:e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName].deviceMac,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName],"deviceMac",t)},expression:"store.devConfDisplayVars.apiDebuggerParams[store.devConfDisplayVars.activeApiTabName].deviceMac"}})],1),a("el-form-item",{attrs:{align:"left"}},[a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.startDebugApi}},[e._v("开始调试")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.genCode}},[e._v("生成代码")])],1)],1)],1)],1),a("el-tab-pane",{attrs:{name:"disconnect"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-scissors"}),e._v(" 断开连接")]),a("el-form",{staticStyle:{"margin-top":"15px"},attrs:{"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"设备地址"}},[a("el-input",{model:{value:e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName].deviceMac,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDebuggerParams[e.store.devConfDisplayVars.activeApiTabName],"deviceMac",t)},expression:"store.devConfDisplayVars.apiDebuggerParams[store.devConfDisplayVars.activeApiTabName].deviceMac"}})],1),a("el-form-item",{attrs:{align:"left"}},[a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.startDebugApi}},[e._v("开始调试")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.genCode}},[e._v("生成代码")])],1)],1)],1)],1)],1),a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:"apiDebuggerMenuItem"===e.store.devConfDisplayVars.activeMenuItem,expression:"store.devConfDisplayVars.activeMenuItem === 'apiDebuggerMenuItem'"}],model:{value:e.store.devConfDisplayVars.activeApiOutputTabName,callback:function(t){e.$set(e.store.devConfDisplayVars,"activeApiOutputTabName",t)},expression:"store.devConfDisplayVars.activeApiOutputTabName"}},[a("el-tab-pane",{attrs:{name:"output"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-circle-check"}),e._v(" 调试结果")]),"scan"===e.store.devConfDisplayVars.activeApiTabName?a("highlight-code",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadApiDebuggerResult,expression:"loadApiDebuggerResult"}],attrs:{lang:"javascript","infinite-scroll-distance":"20px","infinite-scroll-disabled":e.cache.isApiDebuggerLoading}},[e._v(" "+e._s(e.cache.apiDebuggerResult[e.store.devConfDisplayVars.activeApiTabName].displayResultList.join("\n"))+" ")]):e._e(),"scan"!==e.store.devConfDisplayVars.activeApiTabName?a("highlight-code",{attrs:{lang:"javascript"}},[e._v(" "+e._s(e.cache.apiDebuggerResult[e.store.devConfDisplayVars.activeApiTabName].resultList.join("\n"))+" ")]):e._e()],1),a("el-tab-pane",{attrs:{name:"curl"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-circle-plus-outline"}),e._v(" cURL代码")]),a("highlight-code",{attrs:{lang:"bash"}},[e._v(" "+e._s(e.cache.apiDebuggerResult[e.store.devConfDisplayVars.activeApiTabName].code["curl"])+" ")])],1),a("el-tab-pane",{attrs:{name:"nodejs"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-circle-plus-outline"}),e._v(" NodeJS代码")]),a("highlight-code",{attrs:{lang:"js"}},[e._v(" "+e._s(e.cache.apiDebuggerResult[e.store.devConfDisplayVars.activeApiTabName].code["nodejs"])+" ")])],1)],1),a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:"apiLogListMenuItem"===e.store.devConfDisplayVars.activeMenuItem,expression:"store.devConfDisplayVars.activeMenuItem === 'apiLogListMenuItem'"}]},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-connection"}),e._v(" 接口日志")]),a("el-row",[a("vxe-toolbar",{scopedSlots:e._u([{key:"buttons",fn:function(){return[a("span",[e._v("接口日志数量:"),a("span",{staticStyle:{"font-weight":"bold",color:"#409eff"}},[e._v(e._s(e.getComputedApiLogDisplayResultList().length)+" ")])]),a("vxe-input",{attrs:{type:"search",placeholder:"搜索",size:"small"},model:{value:e.cache.apiLogDisplayFilterContent,callback:function(t){e.$set(e.cache,"apiLogDisplayFilterContent",t)},expression:"cache.apiLogDisplayFilterContent"}}),a("vxe-button",{attrs:{status:"primary",size:"small"},on:{click:e.apiLogDisplayResultExport}},[e._v("导出")]),a("vxe-button",{attrs:{status:"danger",size:"small"},on:{click:e.apiLogDisplayResultClear}},[e._v("清空")])]},proxy:!0}])}),a("vxe-grid",{ref:"refApiLogDisplayResultGrid",attrs:{border:"none",stripe:"",height:"560px","highlight-hover-row":"","sort-config":{trigger:"cell"},data:e.getComputedApiLogDisplayResultList()}},[a("vxe-table-column",{attrs:{field:"timeStr",title:"时间",type:"html",width:"25%",sortable:""}}),a("vxe-table-column",{attrs:{field:"apiName",title:"接口名称",type:"html",width:"15%",sortable:""}}),a("vxe-table-column",{attrs:{field:"apiContentJson",title:"请求内容",type:"html",width:"60%",sortable:""}})],1)],1)],1)],1),a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:"apiDemoMenuItem"===e.store.devConfDisplayVars.activeMenuItem,expression:"store.devConfDisplayVars.activeMenuItem === 'apiDemoMenuItem'"}]},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-connection"}),e._v(" [单设备]建连->写入->通知")]),a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("1.连接设备")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.apiDemoConnectTest}},[e._v("测试")])],1),a("el-form",{attrs:{"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"历史接口"}},[a("el-select",{staticStyle:{width:"100%"},on:{change:e.apiDemoConnectChanged},model:{value:e.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.connect.tempFromApiLogUrl,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.connect,"tempFromApiLogUrl",t)},expression:"store.devConfDisplayVars.apiDemoParams.connectWriteNotify.connect.tempFromApiLogUrl"}},e._l(e.getApiLogListByFilter({apiName:"连接设备"}),(function(e,t){return a("el-option",{key:t,attrs:{label:e.apiContentJson,value:e.apiContentJson}})})),1)],1),a("el-form-item",{attrs:{label:"使用芯片"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.connect.chip,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.connect,"chip",t)},expression:"store.devConfDisplayVars.apiDemoParams.connectWriteNotify.connect.chip"}},[a("el-radio-button",{attrs:{label:"0"}},[e._v("芯片0")]),a("el-radio-button",{attrs:{label:"1"}},[e._v("芯片1")])],1)],1),a("el-form-item",{attrs:{label:"地址类型"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.connect.addrType,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.connect,"addrType",t)},expression:"store.devConfDisplayVars.apiDemoParams.connectWriteNotify.connect.addrType"}},[a("el-radio-button",{attrs:{label:"public"}},[e._v("PUBLIC")]),a("el-radio-button",{attrs:{label:"random"}},[e._v("RANDOM")])],1)],1),a("el-form-item",{attrs:{label:"设备地址"}},[a("el-input",{model:{value:e.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.connect.deviceMac,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.connect,"deviceMac",t)},expression:"store.devConfDisplayVars.apiDemoParams.connectWriteNotify.connect.deviceMac"}})],1)],1)],1),a("el-card",{staticStyle:{"margin-top":"15px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("2.写入指令")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.apiDemoWriteTest}},[e._v("测试")])],1),a("el-form",{attrs:{"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"历史接口"}},[a("el-select",{staticStyle:{width:"100%"},on:{change:e.apiDemoWriteChanged},model:{value:e.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.write.tempFromApiLogUrl,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.write,"tempFromApiLogUrl",t)},expression:"store.devConfDisplayVars.apiDemoParams.connectWriteNotify.write.tempFromApiLogUrl"}},e._l(e.getApiLogListByFilter({apiName:"写入数据"}),(function(e,t){return a("el-option",{key:t,attrs:{label:e.apiContentJson,value:e.apiContentJson}})})),1)],1),a("el-form-item",{attrs:{label:"HANDLE"}},[a("el-input",{model:{value:e.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.write.handle,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.write,"handle",t)},expression:"store.devConfDisplayVars.apiDemoParams.connectWriteNotify.write.handle"}})],1),a("el-form-item",{attrs:{label:"VALUE"}},[a("el-input",{model:{value:e.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.write.value,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.write,"value",t)},expression:"store.devConfDisplayVars.apiDemoParams.connectWriteNotify.write.value"}})],1),a("el-form-item",{attrs:{label:"写入方式"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.write.noresponse,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.write,"noresponse",t)},expression:"store.devConfDisplayVars.apiDemoParams.connectWriteNotify.write.noresponse"}},[a("el-radio-button",{attrs:{label:"false"}},[e._v("等待")]),a("el-radio-button",{attrs:{label:"true"}},[e._v("不等待")])],1)],1)],1)],1),a("el-card",{staticStyle:{"margin-top":"15px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("3.接收通知")])]),a("el-form",{attrs:{"label-width":"80px",size:"small"}},[a("span",{staticStyle:{"font-size":"12px"}},[e._v("通过SSE接收数据")])])],1),a("el-button-group",{staticStyle:{"margin-top":"15px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.apiDemoConnectWriteNotifyGenCode}},[e._v("生成代码")]),a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("清空数据")])],1),a("highlight-code",{attrs:{lang:"javascript"}},[e._v(" "+e._s(e.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.code)+" ")])],1),a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-connection"}),e._v(" [多设备]扫描->建连->写入")]),a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("1.扫描设备")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.apiDemoScanTest}},[e._v("测试")])],1),a("el-form",{staticStyle:{"margin-top":"15px"},attrs:{"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"历史接口"}},[a("el-select",{staticStyle:{width:"100%"},on:{change:e.apiDemoScanChanged},model:{value:e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.scan.tempFromApiLogUrl,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.scan,"tempFromApiLogUrl",t)},expression:"store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.scan.tempFromApiLogUrl"}},e._l(e.getApiLogListByFilter({apiName:"扫描设备"}),(function(e,t){return a("el-option",{key:t,attrs:{label:e.apiContentJson,value:e.apiContentJson}})})),1)],1),a("el-form-item",{attrs:{label:"使用芯片"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.scan.chip,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.scan,"chip",t)},expression:"store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.scan.chip"}},[a("el-radio-button",{attrs:{label:0}},[e._v("芯片0")]),a("el-radio-button",{attrs:{label:1}},[e._v("芯片1")])],1)],1),a("el-form-item",{attrs:{label:"过滤名称"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",multiple:"",filterable:"","allow-create":"","default-first-option":""},model:{value:e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.scan.filter_name,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.scan,"filter_name",t)},expression:"store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.scan.filter_name"}})],1),a("el-form-item",{attrs:{label:"过滤MAC"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",multiple:"",filterable:"","allow-create":"","default-first-option":""},model:{value:e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.scan.filter_mac,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.scan,"filter_mac",t)},expression:"store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.scan.filter_mac"}})],1),a("el-form-item",{attrs:{label:"过滤RSSI"}},[a("el-slider",{attrs:{"show-input":"",min:-85,max:0},model:{value:e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.scan.filter_rssi,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.scan,"filter_rssi",t)},expression:"store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.scan.filter_rssi"}})],1)],1)],1),a("el-card",{staticStyle:{"margin-top":"15px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("2.连接设备")])]),a("el-form",{attrs:{"label-width":"80px",size:"small"}},[a("span",{staticStyle:{"font-size":"12px"}},[e._v("连接扫描到的设备")])])],1),a("el-card",{staticStyle:{"margin-top":"15px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("3.写入指令")])]),a("el-form",{attrs:{"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"历史接口"}},[a("el-select",{staticStyle:{width:"100%"},on:{change:e.apiDemoWriteChanged},model:{value:e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.write.tempFromApiLogUrl,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.write,"tempFromApiLogUrl",t)},expression:"store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.write.tempFromApiLogUrl"}},e._l(e.getApiLogListByFilter({apiName:"写入数据"}),(function(e,t){return a("el-option",{key:t,attrs:{label:e.apiContentJson,value:e.apiContentJson}})})),1)],1),a("el-form-item",{attrs:{label:"HANDLE"}},[a("el-input",{model:{value:e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.write.handle,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.write,"handle",t)},expression:"store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.write.handle"}})],1),a("el-form-item",{attrs:{label:"VALUE"}},[a("el-input",{model:{value:e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.write.value,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.write,"value",t)},expression:"store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.write.value"}})],1),a("el-form-item",{attrs:{label:"写入方式"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.write.noresponse,callback:function(t){e.$set(e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.write,"noresponse",t)},expression:"store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.write.noresponse"}},[a("el-radio-button",{attrs:{label:"false"}},[e._v("等待")]),a("el-radio-button",{attrs:{label:"true"}},[e._v("不等待")])],1)],1)],1)],1),a("el-card",{staticStyle:{"margin-top":"15px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("4.接收通知")])]),a("el-form",{attrs:{"label-width":"80px",size:"small"}},[a("span",{staticStyle:{"font-size":"12px"}},[e._v("通过SSE接收数据")])])],1),a("el-button-group",{staticStyle:{"margin-top":"15px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.apiDemoScanConnectWriteNotifyGenCode}},[e._v("生成代码")]),a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("清空数据")])],1),a("highlight-code",{attrs:{lang:"javascript"}},[e._v(" "+e._s(e.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.code)+" ")])],1)],1),a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:"toolsMenuItem"===e.store.devConfDisplayVars.activeMenuItem,expression:"store.devConfDisplayVars.activeMenuItem === 'toolsMenuItem'"}]},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-s-tools"}),e._v(" 常用工具")]),a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("进制转换")])]),a("el-form",{staticStyle:{width:"100%"},attrs:{inline:!0,size:"small"}},[a("el-form-item",[a("el-radio-group",{model:{value:e.store.devConfDisplayVars.toolsBinaryConversion.type,callback:function(t){e.$set(e.store.devConfDisplayVars.toolsBinaryConversion,"type",t)},expression:"store.devConfDisplayVars.toolsBinaryConversion.type"}},[a("el-radio-button",{attrs:{label:"2"}}),a("el-radio-button",{attrs:{label:"10"}}),a("el-radio-button",{attrs:{label:"16"}})],1)],1),a("el-form-item",[a("el-input",{model:{value:e.store.devConfDisplayVars.toolsBinaryConversion.value,callback:function(t){e.$set(e.store.devConfDisplayVars.toolsBinaryConversion,"value",t)},expression:"store.devConfDisplayVars.toolsBinaryConversion.value"}})],1)],1)],1),a("el-card",{staticStyle:{"margin-top":"15px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("HEX/TEXT转换")])]),a("el-form",{staticStyle:{width:"100%"},attrs:{inline:!0,size:"small"}},[a("el-form-item",[a("el-radio-group",{model:{value:e.store.devConfDisplayVars.toolsHexTextConversion.type,callback:function(t){e.$set(e.store.devConfDisplayVars.toolsHexTextConversion,"type",t)},expression:"store.devConfDisplayVars.toolsHexTextConversion.type"}},[a("el-radio-button",{attrs:{label:"hex"}}),a("el-radio-button",{attrs:{label:"text"}})],1)],1),a("el-form-item",[a("el-input",{model:{value:e.store.devConfDisplayVars.toolsHexTextConversion.value,callback:function(t){e.$set(e.store.devConfDisplayVars.toolsHexTextConversion,"value",t)},expression:"store.devConfDisplayVars.toolsHexTextConversion.value"}})],1)],1)],1),a("el-card",{staticStyle:{"margin-top":"15px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("JSON格式化")])]),a("el-form",{staticStyle:{width:"100%"},attrs:{size:"small"}},[a("el-form-item",[a("el-input",{model:{value:e.store.devConfDisplayVars.toolsJsonConversion.inline,callback:function(t){e.$set(e.store.devConfDisplayVars.toolsJsonConversion,"inline",t)},expression:"store.devConfDisplayVars.toolsJsonConversion.inline"}})],1),a("el-form-item",[a("highlight-code",{attrs:{lang:"javascript"}},[e._v(" "+e._s(e.store.devConfDisplayVars.toolsJsonConversion.format)+" ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)}),Ee=[],Le=a("d378"),Pe=Le["a"].createVue(),_e=Pe,Oe=(a("034f"),a("2877")),Me=Object(Oe["a"])(_e,Ie,Ee,!1,null,null,null),Be=Me.exports,ke=null;function Ue(){n["default"].use(Ae.a),n["default"].use(we["a"],{languages:{javascript:Re.a,bash:xe.a}}),n["default"].component("v-chart",Ve["a"])}function Fe(){return ke}function We(e,t,a){Fe().$set(e,t,a)}(function(){Ue(),ke=new n["default"]({el:"#app",render:function(e){return e(Be)}})})();t["default"]={getGlobalVue:Fe,setObjProperty:We}},6294:function(e,t,a){"use strict";a("99af"),a("a15b"),a("b0c0"),a("d3b7"),a("ac1f"),a("25f0"),a("1276"),a("498a");var n=a("ade3"),s=a("b639"),r=a.n(s),o=a("8144"),i=a("3933"),c=(a("fb6a"),a("a434"),a("2909")),l=i["a"].genModuleLogger("characteristic-parser"),p={"Device Name":F,Appearance:j,"Peripheral Preferred Connection Parameters":z,"Service Changed":H,"Model Number String":U,"Serial Number String":k,"Hardware Revision String":B,"Firmware Revision String":M,"Software Revision String":O,"System ID":_,"PnP ID":P,"New Alert":E,"Alert Notification Control Point":R,"Current Time":T,"Date Time":w,"Day Date Time":S,"Day of Week":b,"Exact Time 256":C,"Manufacturer Name String":g,"IEEE 11073-20601 Regulatory Certification Data List":h,"Body Sensor Location":y,"Battery Level":f,"Alert Level":d},u={0:"No Alert",1:"Mild Alert",2:"High Alert"};function d(e){var t=[];try{var a=s["Buffer"].from(e,"hex"),n=a.readUInt8(0);t.push({name:"Level",raw:a.slice(0,1).toString("hex"),parsed:u[n]||"Reserved"})}catch(r){l.error(r)}return t}function f(e){var t=[];try{var a=s["Buffer"].from(e,"hex"),n=a.readUInt8(0);t.push({name:"Level",raw:a.slice(0,1).toString("hex"),parsed:"".concat(n,"%, [0, 100]")})}catch(r){l.error(r)}return t}var v={0:"Other",1:"Chest",2:"Wrist",3:"Finger",4:"Hand",5:"Ear Lobe",6:"Foot"};function m(e){return e>=7&&e<=255?"ReservedForFutureUse":v[e]||e}function y(e){var t=[];try{var a=s["Buffer"].from(e,"hex"),n=a.readUInt8(0);t.push({name:"Body Sensor Location",raw:a.slice(0,1).toString("hex"),parsed:m(n)})}catch(r){l.error(r)}return t}function h(e){var t=[];try{s["Buffer"].from(e,"hex")}catch(a){l.error(a)}return t}function g(e){var t=[];try{var a=s["Buffer"].from(e,"hex");t.push({name:"Manufacturer Name",raw:e,parsed:a.toString()})}catch(n){l.error(n)}return t}function C(e){var t=[];try{var a=s["Buffer"].from(e,"hex"),n=S(a.slice(0,8).toString("hex"));t.splice.apply(t,[0,n.length].concat(Object(c["a"])(n)));var r=a.readUInt8(8,9);t.push({name:"Fractions256",raw:a.slice(8,9).toString("hex"),parsed:"".concat(r,", [0, 255]")})}catch(o){l.error(o)}return t}var D={0:"Day of week is not known",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday",7:"Sunday"};function b(e){var t=[];try{var a=s["Buffer"].from(e,"hex"),n=a.readUInt8();t.push({name:"Day of Week",raw:a.slice(0,1).toString("hex"),parsed:D[n]})}catch(r){l.error(r)}return t}function S(e){var t=[];try{var a=s["Buffer"].from(e,"hex"),n=w(a.slice(0,7).toString("hex"));t.splice.apply(t,[0,n.length].concat(Object(c["a"])(n)));var r=b(a.slice(7,8).toString("hex"));t.splice.apply(t,[t.length,r.length].concat(Object(c["a"])(r)))}catch(o){l.error(o)}return t}var A={0:"Month is not known",1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"};function w(e){var t=[];try{var a=s["Buffer"].from(e,"hex"),n=a.readUInt16LE(0,2);t.push({name:"Year",raw:a.slice(0,2).toString("hex"),parsed:0===n?"Year is not known":"".concat(n,", [1582, 9999]")});var r=a.readUInt8(2);t.push({name:"Month",raw:a.slice(2,3).toString("hex"),parsed:A[r]});var o=a.readUInt8(3);t.push({name:"Day",raw:a.slice(3,4).toString("hex"),parsed:0===o?"Day of Month is not known":o});var i=a.readUInt8(4);t.push({name:"Hours",raw:a.slice(4,5).toString("hex"),parsed:i});var c=a.readUInt8(5);t.push({name:"Minutes",raw:a.slice(5,6).toString("hex"),parsed:c});var p=a.readUInt8(6);t.push({name:"Seconds",raw:a.slice(6,7).toString("hex"),parsed:p})}catch(u){l.error(u)}return t}function T(e){var t=[];try{var a=s["Buffer"].from(e,"hex"),n=C(a.slice(0,9).toString("hex"));t.splice.apply(t,[0,n.length].concat(Object(c["a"])(n)))}catch(r){l.error(r)}return t}var x={0:"Enable New Incoming Alert Notification",1:"Enable Unread Category Status Notification",2:"Disable New Incoming Alert Notification",3:"Disable Unread Category Status Notification",4:"Notify New Incoming Alert immediately",5:"Notify Unread Category Status immediately"};function N(e){return e>=6&&e<=255?"ReservedForFutureUse":x[e]||e}function R(e){var t=[];try{var a=s["Buffer"].from(e,"hex"),n=a.readUInt8();t.push({name:"Command ID",raw:a.slice(0,1).toString("hex"),parsed:N(n)});var r=a.readUInt8(1);t.push({name:"Category ID",raw:a.slice(1,2).toString("hex"),parsed:I(r)})}catch(o){l.error(o)}return t}var V={0:"Simple Alert: General text alert or non-text alert",1:"Email: Alert when Email messages arrives",2:"News: News feeds such as RSS, Atom",3:"Call: Incoming call",4:"Missed call: Missed Call",5:"SMS/MMS: SMS/MMS message arrives",6:"Voice mail: Voice mail",7:"Schedule: Alert occurred on calendar, planner",8:"High Prioritized Alert: Alert that should be handled as high priority",9:"Instant Message: Alert for incoming instant messages"};function I(e){return e>=10&&e<=250?"ReservedForFutureUse":e>=251&&e<=255?"DefinedByServiceSpecification":V[e]}function E(e){var t=[];try{var a=s["Buffer"].from(e,"hex"),n=a.readUInt8();t.push({name:"Category ID",raw:a.slice(0,1).toString("hex"),parsed:I(n)});var r=a.readUInt8(1);t.push({name:"Number of New Alert",raw:a.slice(1,2),parsed:"".concat(r,", [0, 255]")});var o=a.slice(2);t.push({name:"Text String Information",raw:o.toString("hex"),parsed:o.toString()})}catch(i){l.error(i)}return t}var L={1:"Bluetooth SIG assigned Company Identifier value from the Assigned Numbers document",2:"USB Implementer’s Forum assigned Vendor ID value"};function P(e){var t=[];try{var a=s["Buffer"].from(e,"hex"),n=a.readUInt8(0);t.push({name:"Vendor ID Source",raw:a.slice(0,1).toString("hex"),parsed:L[n]||"".concat(n,", [1, 2]")});var r=a.readUInt16LE(1);t.push({name:"Vendor ID",raw:a.slice(1,3).toString("hex"),parsed:r});var o=a.readUInt16LE(3);t.push({name:"Product ID",raw:a.slice(3,5).toString("hex"),parsed:o});var i=a.readUInt16LE(5);t.push({name:"Product Version",raw:a.slice(5,7).toString("hex"),parsed:i})}catch(c){l.error(c)}return t}function _(e){s["Buffer"].from(e,"hex");return[]}function O(e){return[{name:"Software Revision",raw:e,parsed:s["Buffer"].from(e,"hex").toString()}]}function M(e){return[{name:"Firmware Revision",raw:e,parsed:s["Buffer"].from(e,"hex").toString()}]}function B(e){return[{name:"Hardware Revision",raw:e,parsed:s["Buffer"].from(e,"hex").toString()}]}function k(e){return[{name:"Serial Number",raw:e,parsed:s["Buffer"].from(e,"hex").toString()}]}function U(e){return[{name:"Model Number",raw:e,parsed:s["Buffer"].from(e,"hex").toString()}]}function F(e){return[{name:"Name",raw:e,parsed:s["Buffer"].from(e,"hex").toString()}]}var W={0:"Unknown",64:"Generic Phone",128:"Generic Computer",192:"Generic Watch",193:"Watch: Sports Watch",256:"Generic Clock",320:"Generic Display",384:"Generic Remote Control",448:"Generic Eye-glasses",512:"Generic Tag",576:"Generic Keyring",640:"Generic Media Player",704:"Generic Barcode Scanner",768:"Generic Thermometer",769:"Thermometer: Ear",832:"Generic Heart rate Sensor",833:"Heart Rate Sensor: Heart Rate Belt",896:"Generic Blood Pressure",897:"Blood Pressure: Arm",898:"Blood Pressure: Wrist",960:"Human Interface Device (HID)",961:"Keyboard",962:"Mouse",963:"Joystick",964:"Gamepad",965:"Digitizer Tablet",966:"Card Reader",967:"Digital Pen",968:"Barcode Scanner",1024:"Generic Glucose Meter",1088:"Generic: Running Walking Sensor",1089:"Running Walking Sensor: In-Shoe",1090:"Running Walking Sensor: On-Shoe",1091:"Running Walking Sensor: On-Hip",1152:"Generic: Cycling",1153:"Cycling: Cycling Computer",1154:"Cycling: Speed Sensor",1155:"Cycling: Cadence Sensor",1156:"Cycling: Power Sensor",1157:"Cycling: Speed and Cadence Sensor",3136:"Generic: Pulse Oximeter",3137:"Fingertip",3138:"Wrist Worn",3200:"Generic: Weight Scale",3264:"Generic Personal Mobility Device",3265:"Powered Wheelchair",3266:"Mobility Scooter",3328:"Generic Continuous Glucose Monitor",3392:"Generic Insulin Pump",3393:"Insulin Pump, durable pump",3396:"Insulin Pump, patch pump",3400:"Insulin Pen",3456:"Generic Medication Delivery",5184:"Generic: Outdoor Sports Activity",5185:"Location Display Device",5186:"Location and Navigation Display Device",5187:"Location Pod",5188:"Location and Navigation Pod"};function j(e){var t=[];try{var a=s["Buffer"].from(e,"hex"),n=a.readUInt16LE(0).toString();t.push({name:"Category",raw:e,parsed:W[n]})}catch(r){l.error(r)}return t}function z(e){var t=[];try{var a=s["Buffer"].from(e,"hex"),n=1.25*a.readUInt16LE(0);t.push({name:"Minimum Connection Interval",raw:a.slice(0,2).toString("hex"),parsed:65535===n?"no specific minimum":"".concat(n,"ms, [6, 3200]")});var r=1.25*a.readUInt16LE(2);t.push({name:"Maximum Connection Interval",raw:a.slice(2,4).toString("hex"),parsed:65535===r?"no specific minimum":"".concat(n,"ms, [6, 3200]")});var o=a.readUInt16LE(4);t.push({name:"Slave Latency",raw:a.slice(4,6).toString("hex"),parsed:"".concat(o,", [0, 1000]")});var i=a.readUInt16LE(6);t.push({name:"Minimum Connection Interval",raw:a.slice(6,8).toString("hex"),parsed:"".concat(i,", [10, 3200]")})}catch(c){l.error(c)}return t}function H(e){var t=[];try{var a=s["Buffer"].from(e,"hex"),n=a.readUInt16LE(0),r=a.readUInt16LE(2);return[{name:"Start of Affected Attribute Handle Range",raw:a.slice(0,2).toString("hex"),parsed:"".concat(n,", [1, 65535]")},{name:"End of Affected Attribute Handle Range",raw:a.slice(2,4).toString("hex"),parsed:"".concat(r,", [1, 65535]")}]}catch(o){console.error(o)}return t}function $(e,t){return p[e]?p[e](t):null}var G,J={getParsedValues:$},q=a("cc01"),K=a("3ca3"),X=a("d378"),Y=i["a"].genModuleLogger("operation"),Z=(G={},Object(n["a"])(G,o["a"].operation.READ,ne),Object(n["a"])(G,o["a"].operation.NOTIFY,Q),Object(n["a"])(G,o["a"].operation.WRITE_NO_RES,ae),Object(n["a"])(G,o["a"].operation.WRITE,te),G);function Q(e,t,a){var n=K["a"].getDevConf(),s=a.notifyHandle||a.handle,r=a.notifyStatus,i=r===o["a"].notifyStatus.ON?"0000":"0100";q["a"].writeByHandleByDevConf(n,t,s,i,!1).then((function(){a.notifyStatus===o["a"].notifyStatus.ON?a.notifyStatus=o["a"].notifyStatus.OFF:a.notifyStatus===o["a"].notifyStatus.OFF&&(a.notifyStatus=o["a"].notifyStatus.ON),X["a"].notify("下发设备通知 ".concat(t," handle ").concat(s," 成功"),"操作成功",o["a"].messageType.SUCCESS)})).catch((function(e){X["a"].notify("下发设备通知 ".concat(t," handle ").concat(s," 失败: ").concat(e),"操作失败",o["a"].messageType.ERROR)}))}function ee(e){return e.trim().split(/\s+/).join("")}function te(e,t,a){var n=K["a"].getDevConf(),s=a.handle,r=a.writeValue;a.writeValueType===o["a"].writeDataType.TEXT&&(r=textToHex(r)),r=ee(r),q["a"].writeByHandleByDevConf(n,t,s,r,!1).then((function(e){X["a"].notify("写入设备 ".concat(t," handle ").concat(s," value ").concat(r," 成功"),"操作成功",o["a"].messageType.SUCCESS)})).catch((function(e){X["a"].notify("写入设备 ".concat(t," handle ").concat(s," value ").concat(r," 失败: ").concat(e),"操作失败",o["a"].messageType.ERROR)}))}function ae(e,t,a){var n=K["a"].getDevConf(),s=a.handle,i=a.writeValue;a.writeValueType===o["a"].writeDataType.TEXT&&(i=r.a.from(i).toString("hex")),i=ee(i),q["a"].writeByHandleByDevConf(n,t,s,i,!0).then((function(e){X["a"].notify("写入设备 ".concat(t," handle ").concat(s," value ").concat(i," 成功"),"操作成功",o["a"].messageType.SUCCESS)})).catch((function(e){X["a"].notify("写入设备 ".concat(t," handle ").concat(s," value ").concat(i," 失败: ").concat(e),"操作失败",o["a"].messageType.ERROR)}))}function ne(e,t,a){var n=K["a"].getDevConf(),s=a.handle;q["a"].readByHandleByDevConf(n,t,s).then((function(e){a.readValue=e.value||"No Data",a.parsedReadValues=J.getParsedValues(a.name,a.readValue),X["a"].notify("读取设备 ".concat(t," handle ").concat(s," 成功"),"操作成功",o["a"].messageType.SUCCESS)})).catch((function(e){a.readValue="",a.parsedReadValues=[],X["a"].notify("读取设备 ".concat(t," handle ").concat(s," 失败: ").concat(e),"操作失败",o["a"].messageType.ERROR),Y.error(e)}))}function se(e,t,a){var n="no support operation: ".concat(e,", ").concat(t,", ").concat(JSON.stringify(a));return Y.warn(n),Promise.reject(n)}function re(e,t,a){var n=Z[e]||se;return n(e,t,a)}t["a"]={dispatch:re}},"6e7a":function(e,t,a){"use strict";var n=a("8144"),s=a("3933"),r=a("cc01"),o=a("3ca3"),i=a("d378"),c=s["a"].genModuleLogger("notify"),l=null;function p(e){var t=JSON.parse(e.data);c.info("notify sse message:",e);var a=o["a"].getCache();a.notifyResultList.push({time:Date.now(),mac:t.id,handle:t.handle,value:t.value})}function u(e){c.error("notify sse error:",e),i["a"].notify("关闭设备通知SSE，SSE异常: ".concat(e.message||JSON.stringify(e)),"服务异常",n["a"].messageType.ERROR),l.close(),l=null}function d(){if(l)return l;var e=o["a"].getDevConf();l=r["a"].startNotifyByDevConf(e,p,u)}function f(){l&&(l.close(),l=null)}function v(){f(),d()}t["a"]={openNotifySse:d,closeNotifySse:f,reopenNotifySse:v}},"728c":function(e,t,a){"use strict";a("99af"),a("4160"),a("159b");var n,s,r,o,i,c,l=a("ade3"),p=a("8144"),u=a("3ca3"),d=a("cc01"),f=a("2ef0"),v=(c={},Object(l["a"])(c,p["a"].apiType.SCAN,(n={},Object(l["a"])(n,p["a"].codeType.CURL,C),Object(l["a"])(n,p["a"].codeType.NODEJS,w),n)),Object(l["a"])(c,p["a"].apiType.CONNECT,(s={},Object(l["a"])(s,p["a"].codeType.CURL,g),Object(l["a"])(s,p["a"].codeType.NODEJS,b),s)),Object(l["a"])(c,p["a"].apiType.READ,(r={},Object(l["a"])(r,p["a"].codeType.CURL,h),Object(l["a"])(r,p["a"].codeType.NODEJS,A),r)),Object(l["a"])(c,p["a"].apiType.WRITE,(o={},Object(l["a"])(o,p["a"].codeType.CURL,y),Object(l["a"])(o,p["a"].codeType.NODEJS,S),o)),Object(l["a"])(c,p["a"].apiType.DISCONNECT,(i={},Object(l["a"])(i,p["a"].codeType.CURL,m),Object(l["a"])(i,p["a"].codeType.NODEJS,D),i)),c);function m(e){var t=u["a"].getDevConf(),a=d["a"].getDisconnectUrlByDevConf(t,e.deviceMac);return"\n  curl --location --request DELETE '".concat(a,"'\n  ")}function y(e){var t=u["a"].getDevConf(),a=d["a"].getWriteUrlByDevConf(t,e.deviceMac,e.handle,e.value,e.noresponse);return"\n  curl --location --request GET '".concat(a,"'\n  ")}function h(e){var t=u["a"].getDevConf(),a=d["a"].getReadUrlByDevConf(t,e.deviceMac,e.handle);return"\n  curl --location --request GET '".concat(a,"'\n  ")}function g(e){var t=u["a"].getDevConf(),a=d["a"].getConnectUrlByDevConf(t,e.deviceMac,e.chip);return"\n  curl --location --request POST '".concat(a,'\'   --header \'Content-Type: application/json\'   --data-raw \'{\n    "timeout": 5000,\n    "type": "').concat(e.addrType,"\"\n  }'\n  ")}function C(e){var t=u["a"].getDevConf(),a=f.cloneDeep(t);f.forEach(e,(function(e,t){void 0!==e&&null!==e&&(a[t]=e)}));var n=d["a"].getScanUrlByDevConf(a);return'\n  curl -H "Accept: text/event-stream" \''.concat(n,"'\n  ")}function D(e){var t=u["a"].getDevConf(),a=d["a"].getConnectUrlByDevConf(t,e.deviceMac);return"\n  var request = require('request');\n  var options = {\n    'method': 'DELETE',\n    'url': '".concat(a,"',\n    'headers': {\n    }\n  };\n  request(options, function (error, response) { \n    if (error) throw new Error(error);\n    console.log(response.body);\n  });\n  ")}function b(e){var t=u["a"].getDevConf(),a=d["a"].getConnectUrlByDevConf(t,e.deviceMac,e.chip);return"\n  var request = require('request');\n  var options = {\n    'method': 'POST',\n    'url': '".concat(a,"',\n    'headers': {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\"timeout\":5000,\"type\":\"").concat(e.addrType,'"})\n\n  };\n  request(options, function (error, response) { \n    if (error) throw new Error(error);\n    console.log(response.body);\n  });\n  ')}function S(e){var t=u["a"].getDevConf(),a=d["a"].getWriteUrlByDevConf(t,e.deviceMac,e.handle,e.value,e.noresponse);return"\n  var request = require('request');\n  var options = {\n    'method': 'GET',\n    'url': '".concat(a,"',\n    'headers': {\n    }\n  };\n  request(options, function (error, response) { \n    if (error) throw new Error(error);\n    console.log(response.body);\n  });\n  ")}function A(e){var t=u["a"].getDevConf(),a=d["a"].getConnectUrlByDevConf(t,e.deviceMac);return"\n  var request = require('request');\n  var options = {\n    'method': 'GET',\n    'url': '".concat(a,"',\n    'headers': {\n    }\n  };\n  request(options, function (error, response) { \n    if (error) throw new Error(error);\n    console.log(response.body);\n  });\n  ")}function w(e){var t=u["a"].getDevConf(),a=f.cloneDeep(t);f.forEach(e,(function(e,t){void 0!==e&&null!==e&&(a[t]=e)}));var n=d["a"].getScanUrlByDevConf(a);return"\n  const EventSource = require('eventsource');\n\n  const url = '".concat(n,"';\n\n  const sse = new EventSource(url);\n\n  sse.onerror = function(error) {\n    console.log('open scan sse failed:', error);\n  };\n\n  sse.onmessage = function(message) {\n    console.log('recevied scan sse message:', message);\n  };\n  ")}function T(e,t,a){return v[e][t](a)}function x(e,t){var a=u["a"].getDevConf(),n=d["a"].getAsyncConnectUrlByDevConf(a),s=d["a"].getConnectStatusUrlByDevConf(a),r=d["a"].getScanUrlByUserParams(a,e.chip,e.filter_mac,e.filter_name,e.filter_rssi);return"\n  /**\n   * 1.scanned device -> async connect\n   * 2.connect result reported by connect status sse: \n   *  - connected: connect success, then write data\n   *  - disconnected: device disconnected, if the write is not successful, recall async connect\n   *  - timeout: connect timeout, recall async connect\n   * caution: \n   *  - please confirm AP version support\n   *  - connect status event only triggered when event happened, its means already connected devices before sse created will not trigger connect status event\n   */\n  const request = require('request');\n  const EventSource = require('eventsource');\n  \n  const devicesWriteFlag = {};\n  const devicesInfo = {};\n\n  function openScanSse() {\n    const url = '".concat(r,"';\n    const sse = new EventSource(url);\n\n    sse.onerror = function(error) {\n      console.log('open notify sse failed:', error);\n    };\n    \n    // async connect device when scanned it\n    sse.onmessage = function(message) {\n      // console.log('recevied scan sse message:', message);\n      const data = JSON.parse(message.data);\n      const deviceAddr = data.bdaddrs[0];\n      const deviceMac = deviceAddr.bdaddr;\n      if (devicesWriteFlag[deviceMac]) return;\n      const deviceAddrType = deviceAddr.bdaddrType;\n      console.log('scanned device:', deviceMac, deviceAddrType);\n\n      devicesInfo[deviceMac] = deviceAddrType;\n      connect(deviceMac, deviceAddrType);\n    };\n    \n    return Promise.resolve(sse);\n  }\n\n  // async connect to device\n  function connect(deviceMac, addrType) {\n    let options = {\n      'method': 'POST',\n      'url': '").concat(n,"',\n      'headers': {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\"list\":[{\"type\": addrType,\"addr\": deviceMac}],\"timeout\":5000,\"per_dev_timeout\":10000})\n    };\n\n    // if connect failed, retry when scanned it\n    return new Promise((resolve, reject) => {\n      request(options, function (error, response) { \n        console.log('connect:', error, response.body);\n        if (error) reject(error);\n        else if (response.body !== 'OK') reject(response.body);\n        else resolve(response.body);\n      });\n    });\n  }\n\n  // write data to device\n  function write(deviceMac, handle, value, noresponse=false) {\n    const urlTpl = '").concat(d["a"].getWriteUrlByDevConf(a,"#deviceMac","#handle","#value","#noresponse"),"';\n    const url = urlTpl.replace(/#deviceMac/g, deviceMac).replace(/#handle/g, handle).replace(/#value/g, value).replace(/#noresponse/g, noresponse);\n    let options = {\n      'method': 'GET',\n      'url': url,\n      'headers': {}\n    };\n    return new Promise((resolve, reject) => {\n      request(options, function (error, response) { \n        console.log('write:', error, response.body, url);\n        if (error) reject(error);\n        else if (response.body !== 'OK') reject(response.body);\n        else resolve(response.body);\n      });\n    });\n  }\n\n  Promise.wait = function (time) { \n    return new Promise(function (resolve) { \n      return setTimeout(resolve, time || 0); \n    }); \n  }; \n\n  Promise.retry = function (fn, cont, delay, ...p) { \n    return fn(...p).catch(function (err) { \n      return cont > 0 ? Promise.wait(delay).then(function() { \n        return Promise.retry(fn, cont - 1, delay, ...p); \n      }) : Promise.reject('failed'); \n    }); \n  }; \n\n  function openConnectStateSse() {\n    const url = '").concat(s,"';\n    const sse = new EventSource(url);\n\n    sse.onerror = function(error) {\n      console.log('open connect status sse failed:', error);\n    };\n    \n    sse.onmessage = function(message) {\n      console.log('recevied connect status sse message:', message);\n      const data = JSON.parse(message.data);\n      const deviceMac = data.handle;\n      if (devicesWriteFlag[deviceMac]) return;\n      if (data.connectionState === 'connected') {\n        Promise.retry(write, 2, 200, deviceMac, ").concat(t.handle,", '").concat(t.value,"', ").concat(t.noresponse,").then(() => {\n          devicesWriteFlag[deviceMac] = true;\n          Promise.retry(disconnect, 2, 50, deviceMac);\n        }).catch(ex => {\n          console.error(ex);\n        });\n      } else if (data.connectionState === 'disconnected') {\n        // retry connect when scanned\n      } else if (data.connectionState === 'timeout') {\n        // retry connect when scanned\n      }\n    };\n    \n    return Promise.resolve(sse);\n  }\n\n  function disconnect(deviceMac) {\n    const urlTpl = '").concat(d["a"].getDisconnectUrlByDevConf(a,"#deviceMac"),"';\n    const url = urlTpl.replace(/#deviceMac/g, deviceMac);\n    let options = {\n      'method': 'DELETE',\n      'url': url,\n      'headers': {\n      }\n    };\n    return new Promise((resolve, reject) => {\n      request(options, function (error, response) { \n        console.log('disconnect:', error, response.body, url);\n        if (error) reject(error);\n        else if (response.body !== 'OK') reject(response.body);\n        else resolve(response.body);\n      });\n    });\n  }\n\n  function main() {\n    openScanSse().then(openConnectStateSse).then(() => {\n      console.log('start success');\n    }).catch(ex => {\n      console.error('start failed:', ex);\n    });\n  }\n\n  main();\n  ")}function N(e,t){var a=u["a"].getDevConf(),n=d["a"].getOauth2UrlByDevConf(a),s=d["a"].getAsyncConnectUrlByDevConf(a,!1),r=d["a"].getConnectStatusUrlByDevConf(a,!1),o=d["a"].getScanUrlByUserParams(a,e.chip,e.filter_mac,e.filter_name,e.filter_rssi,!1);return"\n  /**\n   * 1.scanned device -> async connect\n   * 2.connect result reported by connect status sse: \n   *  - connected: connect success, then write data\n   *  - disconnected: device disconnected, if the write is not successful, recall async connect\n   *  - timeout: connect timeout, recall async connect\n   * caution: \n   *  - please confirm AC version support\n   *  - connect status event only triggered when event happened, its means already connected devices before sse created will not trigger connect status event\n   */\n  const request = require('request');\n  const EventSource = require('eventsource');\n  \n  const key = '".concat(a.acDevKey,"';\n  const secret = '").concat(a.acDevSecret,"';\n\n  const devicesWriteFlag = {};\n  const devicesInfo = {};\n\n  // oauth2\n  function oauth2(key, secret) {\n    const auth = Buffer.from(`${key}:${secret}`).toString('base64');\n    let options = {\n      'method': 'POST',\n      'url': '").concat(n,"',\n      'headers': {\n        'Authorization': `Basic ${auth}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({'grant_type': 'client_credentials'})\n    };\n    return new Promise((resolve, reject) => {\n      request(options, function (error, response) { \n        console.log('oauth2:', error, response.body);\n        if (error) reject(error);\n        else if (response.statusCode !== 200) reject(response.body);\n        else resolve(JSON.parse(response.body).access_token);\n      });\n    });\n  }\n\n  function openScanSse(token) {\n    const url = `").concat(o,"&access_token=${token}`;\n    const sse = new EventSource(url);\n\n    sse.onerror = function(error) {\n      console.log('open notify sse failed:', error);\n    };\n    \n    // async connect device when scanned it\n    sse.onmessage = function(message) {\n      // console.log('recevied scan sse message:', message);\n      const data = JSON.parse(message.data);\n      const deviceAddr = data.bdaddrs[0];\n      const deviceMac = deviceAddr.bdaddr;\n      if (devicesWriteFlag[deviceMac]) return;\n      const deviceAddrType = deviceAddr.bdaddrType;\n      console.log('scanned device:', deviceMac, deviceAddrType);\n\n      devicesInfo[deviceMac] = deviceAddrType;\n      connect(token, deviceMac, deviceAddrType);\n    };\n    \n    return Promise.resolve(sse);\n  }\n\n  // async connect to device\n  function connect(token, deviceMac, addrType) {\n    let options = {\n      'method': 'POST',\n      'url': `").concat(s,"&access_token=${token}`,\n      'headers': {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\"list\":[{\"type\": addrType,\"addr\": deviceMac}],\"timeout\":5000,\"per_dev_timeout\":10000})\n    };\n\n    // if connect failed, retry when scanned it\n    return new Promise((resolve, reject) => {\n      request(options, function (error, response) { \n        console.log('connect:', error, response.body);\n        if (error) reject(error);\n        else if (response.body !== 'OK') reject(response.body);\n        else resolve(response.body);\n      });\n    });\n  }\n\n  // write data to device\n  function write(token, deviceMac, handle, value, noresponse=false) {\n    const urlTpl = '").concat(d["a"].getWriteUrlByDevConf(a,"#deviceMac","#handle","#value","#noresponse",!1),"';\n    let url = urlTpl.replace(/#deviceMac/g, deviceMac).replace(/#handle/g, handle).replace(/#value/g, value).replace(/#noresponse/g, noresponse);\n    url = url + `&access_token=${token}`;\n    let options = {\n      'method': 'GET',\n      'url': url,\n      'headers': {}\n    };\n    return new Promise((resolve, reject) => {\n      request(options, function (error, response) { \n        console.log('write:', error, response.body, url);\n        if (error) reject(error);\n        else if (response.body !== 'OK') reject(response.body);\n        else resolve(response.body);\n      });\n    });\n  }\n\n  Promise.wait = function (time) { \n    return new Promise(function (resolve) { \n      return setTimeout(resolve, time || 0); \n    }); \n  }; \n\n  Promise.retry = function (fn, cont, delay, ...p) { \n    return fn(...p).catch(function (err) { \n      return cont > 0 ? Promise.wait(delay).then(function() { \n        return Promise.retry(fn, cont - 1, delay, ...p); \n      }) : Promise.reject('failed'); \n    }); \n  }; \n\n  function openConnectStateSse(token) {\n    const url = '").concat(r,"' + `&access_token=${token}`;\n    const sse = new EventSource(url);\n\n    sse.onerror = function(error) {\n      console.log('open connect status sse failed:', error);\n    };\n    \n    sse.onmessage = function(message) {\n      console.log('recevied connect status sse message:', message);\n      const data = JSON.parse(message.data);\n      const deviceMac = data.handle;\n      if (devicesWriteFlag[deviceMac]) return;\n      if (data.connectionState === 'connected') {\n        Promise.retry(write, 2, 200, token, deviceMac, ").concat(t.handle,", '").concat(t.value,"', ").concat(t.noresponse,").then(() => {\n          devicesWriteFlag[deviceMac] = true;\n          Promise.retry(disconnect, 2, 50, token, deviceMac);\n        }).catch(ex => {\n          console.error(ex);\n        });\n      } else if (data.connectionState === 'disconnected') {\n        // retry connect when scanned\n      } else if (data.connectionState === 'timeout') {\n        // retry connect when scanned\n      }\n    };\n    \n    return Promise.resolve(sse);\n  }\n\n  function disconnect(token, deviceMac) {\n    const urlTpl = '").concat(d["a"].getDisconnectUrlByDevConf(a,"#deviceMac",!1),"';\n    let url = urlTpl.replace(/#deviceMac/g, deviceMac);\n    url = url + `&access_token=${token}`;\n    let options = {\n      'method': 'DELETE',\n      'url': url,\n      'headers': {\n      }\n    };\n    return new Promise((resolve, reject) => {\n      request(options, function (error, response) { \n        console.log('disconnect:', error, response.body, url);\n        if (error) reject(error);\n        else if (response.body !== 'OK') reject(response.body);\n        else resolve(response.body);\n      });\n    });\n  }\n\n  (async () => {\n    try {\n      let token = await oauth2(key, secret);\n      console.log('token:', token);\n      await openScanSse(token);\n      await openConnectStateSse(token);\n      console.log('success');\n    } catch(ex) {\n      console.error('fail:', ex);\n    }\n  })();\n  ")}function R(e,t){var a=u["a"].getDevConf(),n=d["a"].getConnectUrlByDevConf(a,e.deviceMac,e.chip),s=d["a"].getWriteUrlByDevConf(a,e.deviceMac,t.handle,t.value,t.noresponse),r=d["a"].getNotifyUrlByDevConf(a);return"\n  const request = require('request');\n  const EventSource = require('eventsource');\n\n  // connect to device\n  function connect() {\n    let options = {\n      'method': 'POST',\n      'url': '".concat(n,"',\n      'headers': {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\"timeout\":5000, \"type\": \"").concat(e.addrType,"\"})\n    };\n    return new Promise((resolve, reject) => {\n      request(options, function (error, response) { \n        console.log('connect:', error, response.body);\n        if (error) reject(error);\n        else if (response.body !== 'OK') reject(response.body);\n        else resolve(response.body);\n      });\n    });\n  }\n\n  // write data to device\n  function write() {\n    let options = {\n      'method': 'GET',\n      'url': '").concat(s,"',\n      'headers': {\n      }\n    };\n    return new Promise((resolve, reject) => {\n      request(options, function (error, response) { \n        console.log('write:', error, response.body);\n        if (error) reject(error);\n        else if (response.body !== 'OK') reject(response.body);\n        else resolve(response.body);\n      });\n    });\n  }\n\n  function openNotifySse() {\n    const url = '").concat(r,"';\n    const sse = new EventSource(url);\n\n    sse.onerror = function(error) {\n      console.log('open notify sse failed:', error);\n    };\n    \n    sse.onmessage = function(message) {\n      console.log('recevied notify sse message:', message);\n    };\n    \n    return Promise.resolve(sse);\n  }\n\n  // TODO: listen connect status sse, add retry when device disconnected\n\n  function main() {\n    connect().then(write).then(openNotifySse).then(() => {\n      console.log('success');\n    }).catch(ex => {\n      console.error('fail:', ex);\n    });\n  }\n\n  main();\n  ")}function V(e,t){var a=u["a"].getDevConf(),n=d["a"].getOauth2UrlByDevConf(a),s=d["a"].getConnectUrlByDevConf(a,e.deviceMac,e.chip,!1),r=d["a"].getWriteUrlByDevConf(a,e.deviceMac,t.handle,t.value,t.noresponse,!1),o=d["a"].getNotifyUrlByDevConf(a,!1);return"\n  const request = require('request');\n  const EventSource = require('eventsource');\n\n  const key = '".concat(a.acDevKey,"';\n  const secret = '").concat(a.acDevSecret,"';\n\n  // oauth2\n  function oauth2(key, secret) {\n    const auth = Buffer.from(`${key}:${secret}`).toString('base64');\n    let options = {\n      'method': 'POST',\n      'url': '").concat(n,"',\n      'headers': {\n        'Authorization': `Basic ${auth}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({'grant_type': 'client_credentials'})\n    };\n    return new Promise((resolve, reject) => {\n      request(options, function (error, response) { \n        console.log('oauth2:', error, response.body);\n        if (error) reject(error);\n        else if (response.statusCode !== 200) reject(response.body);\n        else resolve(JSON.parse(response.body).access_token);\n      });\n    });\n  }\n\n  // connect to device\n  function connect(token) {\n    let options = {\n      'method': 'POST',\n      'url': `").concat(s,"&access_token=${token}`,\n      'headers': {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\"timeout\":5000, \"type\": \"").concat(e.addrType,"\"})\n    };\n    return new Promise((resolve, reject) => {\n      request(options, function (error, response) { \n        console.log('connect:', error, response.body);\n        if (error) reject(error);\n        else if (response.body !== 'OK') reject(response.body);\n        else resolve(response.body);\n      });\n    });\n  }\n\n  // write data to device\n  function write(token) {\n    let options = {\n      'method': 'GET',\n      'url': `").concat(r,"&access_token=${token}`,\n      'headers': {\n      }\n    };\n    return new Promise((resolve, reject) => {\n      request(options, function (error, response) { \n        console.log('write:', error, response.body);\n        if (error) reject(error);\n        else if (response.body !== 'OK') reject(response.body);\n        else resolve(response.body);\n      });\n    });\n  }\n\n  function openNotifySse(token) {\n    const url = `").concat(o,"&access_token=${token}`;\n    const sse = new EventSource(url);\n\n    sse.onerror = function(error) {\n      console.log('open notify sse failed:', error);\n    };\n    \n    sse.onmessage = function(message) {\n      console.log('recevied notify sse message:', message);\n    };\n    \n    return Promise.resolve(sse);\n  }\n\n  // TODO: listen connect status sse, add retry when device disconnected\n\n  (async () => {\n    try {\n      let token = await oauth2(key, secret);\n      console.log('token:', token);\n      await connect(token);\n      await write(token);\n      await openNotifySse(token);\n      console.log('success');\n    } catch(ex) {\n      console.error('fail:', ex);\n    }\n  })();\n  ")}function I(e,t){var a=u["a"].getDevConf();return a.controlStyle===p["a"].controlStyle.AP?R(e,t):V(e,t)}function E(e,t){var a=u["a"].getDevConf();return a.controlStyle===p["a"].controlStyle.AP?x(e,t):N(e,t)}t["a"]={genCode:T,apiDemoConnectWriteNotifyGenCode:I,apiDemoScanConnectWriteNotifyGenCode:E}},8144:function(e,t,a){"use strict";var n={AC:"ac",AP:"ap"},s={BROADCASTS:"BROADCASTS",READ:"READ",WRITE_NO_RES:"WRITE NO RES",WRITE:"WRITE",NOTIFY:"NOTIFY",INDICATE:"INDICATE",AUTHEN:"AUTHEN",EXTENDED:"EXTENDED"},r={ON:"on",OFF:"off"},o={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error"},i={HEX:"hex",TEXT:"text"},c={SCAN:"scan",CONNECT:"connect",READ:"read",WRITE:"write",DISCONNECT:"disconnect"},l={CURL:"curl",NODEJS:"nodejs"},p={PUBLIC:"public",RANDOM:"random"};t["a"]={operation:s,controlStyle:n,notifyStatus:r,messageType:o,writeDataType:i,apiType:c,codeType:l,deviceAddrType:p}},"85ec":function(e,t,a){},cc01:function(e,t,a){"use strict";a("99af"),a("7db0"),a("4160"),a("caad"),a("a15b"),a("d3b7"),a("2532"),a("159b");var n=a("bc3a"),s=a.n(n),r=a("3933"),o=a("8144"),i={http:{requestTimeout:5e3}},c=i,l={http:{requestTimeout:1e3}},p=l,u=c;"production"===window.ENV&&(u=p);var d=u;a("d81d"),a("fb6a"),a("ac1f"),a("25f0"),a("5319"),a("1276");function f(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})))}function v(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}var m={encode:f,decode:v},y=a("3ca3"),h=a("2ef0"),g=r["a"].genModuleLogger("api");function C(e){var t=[];return h.forEach(e,(function(e,a){h.isArray(e)&&(e=e.join(",")),t.push("".concat(a,"=").concat(e))})),t.join("&")}function D(e){return void 0!==e&&null!==e&&(!h.isArray(e)||0!==e.length)}function b(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={};return h.forEach(e,(function(e,a){h.includes(t,a)&&D(e)&&(n[a]=e)})),e.controlStyle===o["a"].controlStyle.AC&&(n.mac=e.mac,a&&(n.access_token=y["a"].getStorage().accessToken)),n}function S(e,t,a){var n="".concat(e,"/oauth2/token"),r={grant_type:"client_credentials"},o={Authorization:"Basic "+m.encode("".concat(t,":").concat(a))},i=s.a.create({timeout:d.http.requestTimeout,headers:o});return ae("请求令牌","POST",n,{},r,{},o),new Promise((function(e,t){i.post(n,r).then((function(t){g.info("get access token success:",t),e(t.data)})).catch((function(e){g.error("get access token error:",e),t(e)}))}))}function A(e){}function w(e){g.error("scan sse error:",e)}function T(e,t){return"".concat(e,"/gap/nodes?").concat(C(t))}function x(e,t){return"".concat(e,"/gatt/nodes?").concat(C(t))}function N(e,t,a){return"".concat(e,"/gap/nodes/").concat(t,"/connection?").concat(C(a))}function R(e,t){return"".concat(e,"/gap/multi-connect?").concat(C(t))}function V(e,t,a,n){return"".concat(e,"/gatt/nodes/").concat(t,"/handle/").concat(a,"/value?").concat(C(n))}function I(e,t,a,n,s){return"".concat(e,"/gatt/nodes/").concat(t,"/handle/").concat(a,"/value/").concat(n,"?").concat(C(s))}function E(e,t,a){return"".concat(e,"/gap/nodes/").concat(t,"/connection?").concat(C(a))}function L(e,t){return"".concat(e,"/management/nodes/connection-state?").concat(C(t))}function P(e,t,a){var n=new EventSource(e);return n.onmessage=t||A,n.onerror=a||w,g.info("open scan sse:",e),n}function _(e){g.info("connect status sse message:",e)}function O(e){g.error("connect status sse error:",e)}function M(e,t,a){var n=new EventSource(e);return n.onmessage=t||_,n.onerror=a||O,g.info("connect status sse:",e),n}function B(e){g.info("notify sse message:",e)}function k(e){g.error("notify sse error:",e)}function U(e,t,a,n){var s="".concat(e,"/gatt/nodes?").concat(C(t));ae("打开通知","GET/SSE",s,t);var r=new EventSource(s);return r.onmessage=a||B,r.onerror=n||k,g.info("open notify sse:",s),r}function F(e,t,a,n){var r="".concat(e,"/gap/nodes/").concat(a,"/connection/?").concat(C(t)),o={timeout:d.http.requestTimeout,type:n};return ae("连接设备","POST",r,t,o,{deviceMac:a}),new Promise((function(e,t){s.a.post(r,o).then((function(t){g.info("connect device success:",t),e(t.data)})).catch((function(e){var a=e.response?e.response.data:e;g.error("connect device error:",a),t(a)}))}))}function W(e,t,a){var n="".concat(e,"/gap/nodes/").concat(a,"/connection/?").concat(C(t));return ae("断开设备","DELETE",n,t,{},{deviceMac:a}),new Promise((function(e,t){s.a.delete(n).then((function(t){g.info("disconnect device success:",t),e(t.data)})).catch((function(e){var a=e.response?e.response.data:e;g.error("disconnect device error:",a),t(a)}))}))}function j(e,t){var a="".concat(e,"/gap/nodes?").concat(C(t),"&connection_state=connected");return ae("连接列表","GET",a,t),new Promise((function(e,t){s.a.get(a).then((function(t){g.info("get connected list success:",t),e(t.data)})).catch((function(e){var a=e.response?e.response.data:e;g.error("get connected list error:",a),t(a)}))}))}function z(e,t,a){var n="".concat(e,"/gatt/nodes/").concat(a,"/services/characteristics/descriptors?").concat(C(t));return ae("服务列表","GET",n,t,{},{deviceMac:a}),new Promise((function(e,t){s.a.get(n).then((function(t){g.info("get device service list success:",t),e(t.data)})).catch((function(e){var a=e.response?e.response.data:e;g.error("get device service list error:",a),t(a)}))}))}function H(e,t,a,n){var r="".concat(e,"/gatt/nodes/").concat(a,"/handle/").concat(n,"/value?").concat(C(t));return ae("读取数据","GET",r,t,{},{deviceMac:a}),new Promise((function(e,t){s.a.get(r).then((function(t){g.info("read handle success:",t),e(t.data)})).catch((function(e){var a=e.response?e.response.data:e;g.error("read handle error:",a),t(a)}))}))}function $(e,t,a,n,r){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];o&&(t.noresponse=1);var i="".concat(e,"/gatt/nodes/").concat(a,"/handle/").concat(n,"/value/").concat(r,"?").concat(C(t));return ae("写入数据","GET",i,t,{},{deviceMac:a,handle:n,value:r}),new Promise((function(e,t){s.a.get(i).then((function(t){g.info("write handle success:",t),e(t.data)})).catch((function(e){var a=e.response?e.response.data:e;g.error("write handle error:",a),t(a)}))}))}function G(e,t,a){var n=[],s=b(e,n);return V(e.baseURI,t,a,s)}function J(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=[],s=b(e,n,a);return E(e.baseURI,t,s)}function q(e,t,a,n,s){var r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=[],i=b(e,o,r);return s&&(i.noresponse=1),I(e.baseURI,t,a,n,i)}function K(e,t,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=[],r=b(e,s,n);return 0!==+a&&1!==+a||(r.chip=a),N(e.baseURI,t,r)}function X(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=[],n=b(e,a,t);return R(e.baseURI,n)}function Y(e){var t=["chip","filter_mac","filter_name","filter_rssi"],a=b(e,t);return a.active=1,a.event=1,T(e.baseURI,a)}function Z(e,t,a,n,s){var r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=h.cloneDeep(e);o.chip=t,o.filter_mac=a,o.filter_name=n,o.filter_rssi=s;var i=["chip","filter_mac","filter_name","filter_rssi"],c=b(o,i,r);return c.active=1,c.event=1,T(e.baseURI,c)}function Q(e){var t="".concat(e.baseURI,"/oauth2/token");return t}function ee(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=[],n=b(e,a,t);return n.event=1,x(e.baseURI,n)}function te(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=[],n=b(e,a,t);return L(e.baseURI,n)}function ae(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},i=Date.now(),c={url:a,method:t,data:{}};h.isEmpty(o)||(c.headers=o),h.isEmpty(n)||(c.data.query=n),h.isEmpty(s)||(c.data.body=s),h.isEmpty(r)||(c.data.params=r),y["a"].cache.apiLogResultList.push({timestamp:i,timeStr:new Date(i).toISOString(),apiName:e,apiContent:c,apiContentJson:JSON.stringify(c)})}function ne(e,t,a){var n=["chip","filter_mac","filter_name","filter_rssi"],s=b(e,n);s.active=1,s.event=1;var r="".concat(e.baseURI,"/gap/nodes?").concat(C(s));return ae("扫描设备","GET/SSE",r,s),P(r,t,a)}function se(e,t,a,n,s,r,o){var i=h.cloneDeep(e);return i.chip=t,i.filter_mac=a,i.filter_name=n,i.filter_rssi=s,ne(i,r,o)}function re(e,t,a){var n=te(e);return ae("连接事件","GET/SSE",n,""),M(n,t,a)}function oe(e,t,a){var n=[],s=b(e,n);return s.event=1,U(e.baseURI,s,t,a)}function ie(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=b(e,[]),r=y["a"].getCache().scanDisplayResultList;if(!a){var o=h.find(r,{mac:t});if(!o)return Promise.reject("can not get addr type");a=o.bdaddrType}return 0!==+n&&1!==+n||(s.chip=n),F(e.baseURI,s,t,a)}function ce(e){var t=b(e,[]);return j(e.baseURI,t)}function le(e,t){var a=b(e,[]);return W(e.baseURI,a,t)}function pe(e,t){var a=b(e,[]);return z(e.baseURI,a,t)}function ue(e,t,a){var n=b(e,[]);return H(e.baseURI,n,t,a)}function de(e,t,a,n,s){var r=b(e,[]);return $(e.baseURI,r,t,a,n,s)}s.a.defaults.headers["Content-Type"]="application/json";t["a"]={getAccessToken:S,startScanByDevConf:ne,startNotifyByDevConf:oe,connectByDevConf:ie,disconnectByDevConf:le,getConnectedListByDevConf:ce,getDeviceServiceListByDevConf:pe,readByHandleByDevConf:ue,writeByHandleByDevConf:de,getScanUrlByDevConf:Y,openConnectStatusSseByDevConf:re,getConnectUrlByDevConf:K,getReadUrlByDevConf:G,getWriteUrlByDevConf:q,getDisconnectUrlByDevConf:J,startScanByUserParams:se,getNotifyUrlByDevConf:ee,getOauth2UrlByDevConf:Q,getScanUrlByUserParams:Z,getAsyncConnectUrlByDevConf:X,getConnectStatusUrlByDevConf:te}},d378:function(e,t,a){"use strict";(function(e){a("99af"),a("4de4"),a("7db0"),a("c740"),a("4160"),a("c975"),a("a15b"),a("d81d"),a("45fc"),a("a434"),a("b0c0"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("3ca3e"),a("5319"),a("498a"),a("159b"),a("ddb0"),a("2b3d");var n=a("2909"),s=a("c695"),r=a.n(s),o=a("cc01"),i=a("4fbc"),c=a("f599"),l=a("6294"),p=a("3ca3"),u=a("728c"),d=a("3933"),f=a("8144"),v=a("6e7a"),m=a("f9e7"),y=a("56d7"),h=a("2ef0"),g=d["a"].genModuleLogger("vue");function C(e){return function(){return{chartOptions:w(),store:p["a"].getStorage(),cache:p["a"].getCache()}}}function D(){document.querySelectorAll("pre code").forEach((function(e){hljs.highlightBlock(e)}))}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f["a"].messageType.INFO;y["default"].getGlobalVue().$message({message:e,type:t,showClose:!0})}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f["a"].messageType.INFO,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s={title:t,message:e,type:a};n||(s.duration=0),y["default"].getGlobalVue().$notify(s)}function A(){var e=[],t=p["a"].getDevConfDisplayVars();t.rssiChartDataCount=1e3*t.rssiChartPeriod/t.rssiChartDataSpan;for(var a=0;a<t.rssiChartDataCount;a++)e.push((a*t.rssiChartDataSpan).toString());return e}function w(){var e=A();return{title:{show:!1},autoresize:!0,grid:{},legend:{type:"scroll"},xAxis:{type:"category",data:e,axisLabel:{show:!0,rotate:45,interval:0,formatter:function(e,t){return""}}},yAxis:{type:"value",min:-100,max:-10,splitNumber:10,inverse:!0},series:[]}}function T(e){return{apiDemoScanChanged:function(e){var t=JSON.parse(e),a=this.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.scan;a.chip=t.data.query.chip,t.data.query.filter_name&&(a.filter_name=t.data.query.filter_name),t.data.query.filter_mac&&(a.filter_mac=t.data.query.filter_mac),a.filter_rssi=t.data.query.filter_rssi},apiDemoScanTest:function(){var e=this.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.scan,t=o["a"].startScanByUserParams(this.store.devConf,e.chip,e.filter_mac,e.filter_name,e.filter_rssi,(function(){S("测试扫描成功","操作成功",f["a"].messageType.SUCCESS),t.close()}),(function(e){S("测试扫描失败: ".concat(e),"操作失败",f["a"].messageType.ERROR)}))},apiDemoScanConnectWriteNotifyGenCode:function(){var e=this.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.scan,t=this.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.write,a=u["a"].apiDemoScanConnectWriteNotifyGenCode(e,t);this.store.devConfDisplayVars.apiDemoParams.scanConnectWriteNotify.code=a},apiDemoConnectWriteNotifyGenCode:function(){var e=this.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.write,t=this.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.connect,a=u["a"].apiDemoConnectWriteNotifyGenCode(t,e);this.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.code=a},apiDemoWriteChanged:function(e){var t=JSON.parse(e),a=this.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.write;a.handle=t.data.params.handle,a.value=t.data.params.value,a.noresponse=1===h.get(t,"data.query.noresponse")||!1},apiDemoWriteTest:function(){var e=this.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.write,t=this.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.connect;o["a"].writeByHandleByDevConf(this.store.devConf,t.deviceMac,e.handle,e.value,e.noresponse).then((function(){S("测试写入数据 ".concat(deviceMac," 成功"),"操作成功",f["a"].messageType.SUCCESS)})).catch((function(e){S("测试写入数据 ".concat(t.deviceMac," 失败: ").concat(e),"操作失败",f["a"].messageType.ERROR)}))},apiDemoConnectTest:function(){var e=this.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.connect;o["a"].connectByDevConf(this.store.devConf,e.deviceMac,e.addrType,e.chip).then((function(){})).catch((function(t){S("测试连接设备 ".concat(e.deviceMac," 失败: ").concat(t),"操作失败",f["a"].messageType.ERROR)}))},apiDemoConnectChanged:function(e){var t=JSON.parse(e),a=this.store.devConfDisplayVars.apiDemoParams.connectWriteNotify.connect;a.chip=t.data.query.chip,a.deviceMac=t.data.params.deviceMac,a.addrType=t.data.body.type},getApiLogListByFilter:function(e){return h.filter(this.cache.apiLogResultList,e)},getComputedApiLogDisplayResultList:function(){var e=r.a.toString(this.cache.apiLogDisplayFilterContent).trim().toLowerCase();if(e){var t=new RegExp(e,"gi"),a=["apiName","method","url","data"],n=this.cache.apiLogResultList.filter((function(t){return a.some((function(a){return r.a.toString(t[a]).toLowerCase().indexOf(e)>-1}))}));return n.map((function(e){var n=Object.assign({},e);return a.forEach((function(e){n[e]=r.a.toString(n[e]).replace(t,(function(e){return'<span class="keyword-lighten">'.concat(e,"</span>")}))})),n}))}return this.cache.apiLogResultList},getComputedConnectDisplayResultList:function(){var e=r.a.toString(this.cache.connectDisplayFilterContent).trim().toLowerCase();if(e){var t=new RegExp(e,"gi"),a=["mac","name"],n=this.cache.connectedList.filter((function(t){return a.some((function(a){return r.a.toString(t[a]).toLowerCase().indexOf(e)>-1}))}));return n.map((function(e){var n=Object.assign({},e);return a.forEach((function(e){n[e]=r.a.toString(n[e]).replace(t,(function(e){return'<span class="keyword-lighten">'.concat(e,"</span>")}))})),n}))}return this.cache.connectedList},connectTabsClick:function(){this.connectVuxTableForceResize()},scanTabsClick:function(){this.scanVuxTableForceResize()},scanDisplayResultClear:function(){this.cache.scanDisplayResultList.splice(0)},notifyDisplayResultClear:function(){this.cache.notifyDisplayResultList.splice(0)},apiLogDisplayResultClear:function(){this.cache.apiLogResultList.splice(0)},scanDisplayResultExport:function(){this.$refs.refScanDisplayResultGrid.exportData({type:"csv"})},connectDisplayResultExport:function(){this.$refs.refConnectDisplayResultGrid.exportData({type:"csv"})},notifyDisplayResultExport:function(){this.$refs.refNotifyDisplayResultGrid.exportData({type:"csv"})},apiLogDisplayResultExport:function(){this.$refs.refApiLogDisplayResultGrid.exportData({type:"csv"})},loadNotifyResult:function(){var e=5;this.cache.isNotifyLoading=!0;var t=this.cache.notifyResultList.splice(0,e),a=h.map(t,(function(e){return"".concat(new Date(e.time).toISOString(),": ").concat(e.data)}));if(0!==t.length){var s,r=this.cache.notifyDisplayResultList.length;(s=this.cache.notifyDisplayResultList).splice.apply(s,[r,a.length].concat(Object(n["a"])(a))),this.cache.isNotifyLoading=!1}else setTimeout((function(e){e.cache.isNotifyLoading=!1,e.loadNotifyResult()}),500,this)},loadApiDebuggerResult:function(){var e=this.store.devConfDisplayVars.activeApiTabName;if(e===f["a"].apiType.SCAN){var t=5;this.cache.isApiDebuggerLoading=!0;var a=this.cache.apiDebuggerResult[f["a"].apiType.SCAN].resultList.splice(0,t),s=h.map(a,(function(e){return"".concat(new Date(e.time).toISOString(),": ").concat(e.data)}));if(0!==a.length){var r,o=this.cache.apiDebuggerResult[f["a"].apiType.SCAN].displayResultList.length;(r=this.cache.apiDebuggerResult[f["a"].apiType.SCAN].displayResultList).splice.apply(r,[o,s.length].concat(Object(n["a"])(s))),this.cache.isApiDebuggerLoading=!1}else setTimeout((function(e){e.cache.isApiDebuggerLoading=!1,e.loadApiDebuggerResult()}),500,this)}},startDebugApi:function(){var e=this,t=this.store.devConfDisplayVars.activeApiTabName,a=this.store.devConfDisplayVars.apiDebuggerParams[t],n=this.cache.apiDebuggerResult[t];t===f["a"].apiType.SCAN?(n.sse=o["a"].startScanByUserParams(this.store.devConf,a.chip,a.filter_mac,a.filter_name,a.filter_rssi,(function(t){e.store.devConfDisplayVars.isApiScanResultDisplayOn&&e.cache.apiDebuggerResult[f["a"].apiType.SCAN].resultList.push({time:Date.now(),data:t.data.trim()})})),setTimeout((function(){n.sse&&(n.sse.close(),n.sse=null,e.store.devConfDisplayVars.isApiScanning=!1,S("已自动停止API扫描","操作成功",f["a"].messageType.SUCCESS))}),1e4),this.store.devConfDisplayVars.isApiScanning=!0,this.store.devConfDisplayVars.activeApiOutputTabName="output",S("调试API扫描自动执行10秒，正常的SSE会一直收到数据","操作成功",f["a"].messageType.SUCCESS)):t===f["a"].apiType.CONNECT?o["a"].connectByDevConf(this.store.devConf,a.deviceMac,a.addrType,a.chip).then((function(){n.resultList.push("".concat((new Date).toISOString(),": 连接设备成功, ").concat(JSON.stringify(a)))})).catch((function(e){S("连接设备 ".concat(a.deviceMac," 失败: ").concat(e),"操作失败",f["a"].messageType.ERROR),n.resultList.push("".concat((new Date).toISOString(),": 连接设备失败, ").concat(JSON.stringify({apiParams:a,ex:e})))})):t===f["a"].apiType.READ?o["a"].readByHandleByDevConf(this.store.devConf,a.deviceMac,a.handle).then((function(){S("读取数据 ".concat(a.deviceMac," 成功"),"操作成功",f["a"].messageType.SUCCESS),n.resultList.push("".concat((new Date).toISOString(),": 读取数据成功, ").concat(JSON.stringify(a)))})).catch((function(e){S("读取数据 ".concat(a.deviceMac," 失败: ").concat(e),"操作失败",f["a"].messageType.ERROR),n.resultList.push("".concat((new Date).toISOString(),": 读取数据失败, ").concat(JSON.stringify({apiParams:a,ex:e})))})):t===f["a"].apiType.WRITE?o["a"].writeByHandleByDevConf(this.store.devConf,a.deviceMac,a.handle,a.value,a.noresponse).then((function(){S("写入数据 ".concat(a.deviceMac," 成功"),"操作成功",f["a"].messageType.SUCCESS),n.resultList.push("".concat((new Date).toISOString(),": 写入数据成功, ").concat(JSON.stringify(a)))})).catch((function(e){S("写入数据 ".concat(a.deviceMac," 失败: ").concat(e),"操作失败",f["a"].messageType.ERROR),n.resultList.push("".concat((new Date).toISOString(),": 写入数据失败, ").concat(JSON.stringify({apiParams:a,ex:e})))})):t===f["a"].apiType.DISCONNECT&&o["a"].disconnectByDevConf(this.store.devConf,a.deviceMac).then((function(){S("断连设备 ".concat(a.deviceMac," 成功"),"操作成功",f["a"].messageType.SUCCESS),n.resultList.push("".concat((new Date).toISOString(),": 断连设备成功, ").concat(JSON.stringify(a)))})).catch((function(e){S("断连设备 ".concat(a.deviceMac," 失败: ").concat(e),"操作失败",f["a"].messageType.ERROR),n.resultList.push("".concat((new Date).toISOString(),": 断连设备失败, ").concat(JSON.stringify({apiParams:a,ex:e})))}))},openApiOutputDisplay:function(){this.store.devConfDisplayVars.isApiScanResultDisplayOn=!0,S("开启API结果成功","操作成功",f["a"].messageType.SUCCESS)},closeApiOutputDisplay:function(){this.store.devConfDisplayVars.isApiScanResultDisplayOn=!1,S("关闭API结果成功","操作成功",f["a"].messageType.SUCCESS)},exportApiOutputDisplay:function(){S("功能待添加","操作失败",f["a"].messageType.ERROR)},clearApiOutputDisplay:function(){var e=this.store.devConfDisplayVars.activeApiTabName;e===f["a"].apiType.SCAN&&this.cache.apiDebuggerResult[this.store.devConfDisplayVars.activeApiTabName].displayResultList.splice(0),this.cache.apiDebuggerResult[this.store.devConfDisplayVars.activeApiTabName].resultList.splice(0),S("清除API结果成功","操作成功",f["a"].messageType.SUCCESS)},clearNotify:function(){this.cache.notifyResultList.splice(0),this.cache.notifyDisplayResultList.splice(0),S("清除Notify成功","操作成功",f["a"].messageType.SUCCESS)},openNotify:function(){v["a"].openNotifySse(),this.store.devConfDisplayVars.isNotifyOn=!0,S("开启Notify成功","操作成功",f["a"].messageType.SUCCESS)},closeNotify:function(){v["a"].closeNotifySse(),this.store.devConfDisplayVars.isNotifyOn=!1,S("关闭Notify成功","操作成功",f["a"].messageType.SUCCESS)},stopRssiChart:function(){clearInterval(this.rssiChartUpdateInterval),this.rssiChartUpdateInterval=null,this.store.devConfDisplayVars.rssiChartStopped=!0},startRssiChart:function(){this.rssiChartUpdateInterval=N(this),this.store.devConfDisplayVars.rssiChartStopped=!1},destoryRssiChart:function(){clearInterval(this.rssiChartUpdateInterval),this.rssiChartUpdateInterval=null,this.store.devConfDisplayVars.rssiChartSwitch=!1},destoryAndCreateRssiChart:function(){var e=this;this.store.devConfDisplayVars.isScanning?(this.destoryRssiChart(),setTimeout((function(e){e.chartOptions=w(),e.startRssiChart(),S("开启RSSI图表成功","操作成功",f["a"].messageType.SUCCESS)}),100,this),this.store.devConfDisplayVars.rssiChartSwitch=!0):this.$confirm("此操作需要开启扫描, 是否继续?（请配置合适的扫描过滤参数，不超过5个设备，否则会自动暂停）","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.startScan(),e.destoryRssiChart(),setTimeout((function(e){e.chartOptions=w(),e.startRssiChart(),S("开启RSSI图表成功","操作成功",f["a"].messageType.SUCCESS)}),100,e),e.store.devConfDisplayVars.rssiChartSwitch=!0})).catch((function(){}))},connectedListTabRemove:function(e){"invalidDeviceMac"!==e&&this.disconnectDevice(e)},rssiChartDataSpanChange:function(){this.devConfDisplayVars.rssiChartSwitch&&this.destoryAndCreateRssiChart()},genCode:function(){var e=this.store.devConfDisplayVars.activeApiTabName,t=this.store.devConfDisplayVars.apiDebuggerParams[e],a=this.cache.apiDebuggerResult[e];a.code[f["a"].codeType.CURL]=u["a"].genCode(e,f["a"].codeType.CURL,t),a.code[f["a"].codeType.NODEJS]=u["a"].genCode(e,f["a"].codeType.NODEJS,t),this.store.devConfDisplayVars.activeApiOutputTabName=f["a"].codeType.CURL},menuSelect:function(e,t){"connectListMenuItem"===e?(this.store.devConfDisplayVars.activeMenuItem=e,m["a"].loadConnectedList(),m["a"].reopenConnectStatusSse(),this.connectVuxTableForceResize()):"notifyListMenuItem"===e?(this.store.devConfDisplayVars.activeMenuItem=e,this.notifyVuxTableForceResize()):"scanListMenuItem"===e?(this.store.devConfDisplayVars.activeMenuItem=e,this.scanVuxTableForceResize()):"configMenuItem"===e?(this.store.devConfDisplayVars.isConfigMenuItemOpen?(this.store.devConfDisplayVars.isConfigMenuItemOpen=!1,this.store.devConfDisplayVars.mainWidth=24):(this.store.devConfDisplayVars.isConfigMenuItemOpen=!0,this.store.devConfDisplayVars.mainWidth=18),this.scanVuxTableForceResize(),this.notifyVuxTableForceResize(),this.connectVuxTableForceResize(),this.apiLogVuxTableForceResize()):"apiDebuggerMenuItem"===e?this.store.devConfDisplayVars.activeMenuItem=e:"apiLogListMenuItem"===e?(this.store.devConfDisplayVars.activeMenuItem=e,this.apiLogVuxTableForceResize()):("apiDemoMenuItem"===e||"toolsMenuItem"===e)&&(this.store.devConfDisplayVars.activeMenuItem=e)},apiLogVuxTableForceResize:function(){var e=this.cache.apiLogResultList.pop();e&&this.cache.apiLogResultList.push(e)},connectVuxTableForceResize:function(){var e=this.cache.connectedList.pop();e&&this.cache.connectedList.push(e)},scanVuxTableForceResize:function(){var e=this.cache.scanDisplayResultList.pop();e&&this.cache.scanDisplayResultList.push(e)},notifyVuxTableForceResize:function(){var e=this.cache.notifyDisplayResultList.pop();e&&this.cache.notifyDisplayResultList.push(e)},propertyClick:function(e,t,a){l["a"].dispatch(e,t,a)},getDeviceServices:function(e){var t=this;c["a"].getDeviceServiceList(e).then((function(){t.cache.currentConnectedTab=e}))},exportDeviceServices:function(e){c["a"].getDeviceServiceList(e).then((function(t){t=JSON.stringify(t,null,2);var a=new Blob([t],{type:"text/json"}),n=document.createEvent("MouseEvents"),s=document.createElement("a");s.download="".concat(e.replace(/:/g,"_"),"_service.json"),s.href=window.URL.createObjectURL(a),s.dataset.downloadurl=["text/json",s.download,s.href].join(":"),n.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(n)}))},startScan:function(){i["a"].startScan(this.store.devConf),this.store.devConfDisplayVars.isScanning=!0,this.cache.scanResultList.splice(0),this.cache.scanDisplayResultList.splice(0),this.cache.scanDevicesRssiHistory={},this.store.devConfDisplayVars.activeMenuItem="scanListMenuItem",S("开启扫描成功","操作成功",f["a"].messageType.SUCCESS)},stopApiScan:function(){var e=this.store.devConfDisplayVars.activeApiTabName,t=this.cache.apiDebuggerResult[e];t.sse&&(t.sse.close(),t.sse=null,this.store.devConfDisplayVars.isApiScanning=!1,S("已自动停止API扫描","操作成功",f["a"].messageType.SUCCESS))},stopScan:function(){i["a"].stopScan(),this.store.devConfDisplayVars.rssiChartSwitch&&this.stopRssiChart(),this.store.devConfDisplayVars.isScanning=!1},connectDeviceByRow:function(e,t){var a=this;y["default"].setObjProperty(this.cache.devicesConnectLoading,t,!0),o["a"].connectByDevConf(this.store.devConf,t).then((function(){h.remove(a.cache.scanResultList,{mac:t});var n=h.remove(a.cache.scanDisplayResultList,{mac:t});a.$refs.refScanDisplayResultGrid.remove([e]),a.$refs.refScanDisplayResultGrid.refreshData(),a.$refs.refScanDisplayResultGrid.recalculate(),a.$refs.refScanDisplayResultGrid.refreshScroll(),n.length>0&&p["a"].listAddOrUpdate(a.cache.connectedList,{mac:n[0].mac},{mac:n[0].mac,name:n[0].name,bdaddrType:n[0].bdaddrType})})).catch((function(e){S("连接设备 ".concat(t," 失败: ").concat(e),"操作失败",f["a"].messageType.ERROR)})).then((function(){y["default"].setObjProperty(a.cache.devicesConnectLoading,t,!1)}))},disconnectDevice:function(e){var t=this;o["a"].disconnectByDevConf(this.store.devConf,e).then((function(){var a=h.findIndex(t.cache.connectedList,{mac:e});if(-1!==a){t.cache.connectedList.splice(a,1);var n=t.cache.connectedList[a]||t.cache.connectedList[a-1],s=n?n.mac:"0";t.cache.currentConnectedTab=s,t.connectVuxTableForceResize()}})).catch((function(t){S("设备 ".concat(e," 断连失败: ").concat(t),"操作失败",f["a"].messageType.ERROR)}))},apiScanFilterNamesHandleClose:function(e){var t=this.store.devConfDisplayVars.apiDebuggerParams[f["a"].apiType.SCAN].filter_name;t.splice(t.indexOf(e),1)},apiScanFilterNamesShowInput:function(){var e=this;this.store.devConfDisplayVars.apiScanFilterNamesInputVisible=!0,this.$nextTick((function(t){e.$refs.apiScanFilterNamesSaveTagInput.$refs.input.focus()}))},apiScanFilterNamesHandleInputConfirm:function(){var e=this.store.devConfDisplayVars.apiScanFilterNamesInputValue;e&&this.store.devConfDisplayVars.apiDebuggerParams[f["a"].apiType.SCAN].filter_name.push(e),this.store.devConfDisplayVars.apiScanFilterNamesInputVisible=!1,this.store.devConfDisplayVars.apiScanFilterNamesInputValue=""},apiScanFilterMacsHandleClose:function(e){var t=this.store.devConfDisplayVars.apiDebuggerParams[f["a"].apiType.SCAN].filter_mac;t.splice(t.indexOf(e),1)},apiScanFilterMacsShowInput:function(){var e=this;this.store.devConfDisplayVars.apiScanFilterMacsInputVisible=!0,this.$nextTick((function(t){e.$refs.apiScanFilterMacsSaveTagInput.$refs.input.focus()}))},apiScanFilterMacsHandleInputConfirm:function(){var e=this.store.devConfDisplayVars.apiScanFilterMacsInputValue;e&&this.store.devConfDisplayVars.apiDebuggerParams[f["a"].apiType.SCAN].filter_mac.push(e),this.store.devConfDisplayVars.apiScanFilterMacsInputVisible=!1,this.store.devConfDisplayVars.apiScanFilterMacsInputValue=""},scanFilterNamesHandleClose:function(e){this.store.devConf.filter_name.splice(this.store.devConf.filter_name.indexOf(e),1)},scanFilterNamesShowInput:function(){var e=this;this.store.devConfDisplayVars.scanFilterNamesInputVisible=!0,this.$nextTick((function(t){e.$refs.scanFilterNamesSaveTagInput.$refs.input.focus()}))},scanFilterNamesHandleInputConfirm:function(){var e=this.store.devConfDisplayVars.scanFilterNamesInputValue;e&&this.store.devConf.filter_name.push(e),this.store.devConfDisplayVars.scanFilterNamesInputVisible=!1,this.store.devConfDisplayVars.scanFilterNamesInputValue=""},scanFilterMacsHandleClose:function(e){this.store.devConf.filter_mac.splice(this.store.devConf.filter_mac.indexOf(e),1)},scanFilterMacsShowInput:function(){var e=this;this.store.devConfDisplayVars.scanFilterMacsInputVisible=!0,this.$nextTick((function(t){e.$refs.scanFilterMacsSaveTagInput.$refs.input.focus()}))},scanFilterMacsHandleInputConfirm:function(){var e=this.store.devConfDisplayVars.scanFilterMacsInputValue;e&&this.store.devConf.filter_mac.push(e),this.store.devConfDisplayVars.scanFilterMacsInputVisible=!1,this.store.devConfDisplayVars.scanFilterMacsInputValue=""}}}function x(e,t,a){var n=[],s=p["a"].getDevConfDisplayVars();s.rssiChartDataCount=1e3*s.rssiChartPeriod/s.rssiChartDataSpan;var r=h.keys(p["a"].getCache().scanDevicesRssiHistory).length;return r>5?(a.destoryRssiChart(),S("当前扫描设备数量超过5个，已自动关闭rssi图表，请配置合适的扫描过滤参数，防止卡顿","操作失败",f["a"].messageType.ERROR),g.info("11111111111111",r),[]):(h.forEach(p["a"].getCache().scanDevicesRssiHistory,(function(a,r){var o=new Array(s.rssiChartDataCount);h.remove(a,(function(t){return t.time<e})),h.forEach(a,(function(a){if(a.time>=e&&a.time<t){var n=parseInt((a.time-e)/s.rssiChartDataSpan);o[n]=a.rssi}})),n.push({name:r,type:"line",data:o})})),n)}function N(e){var t=p["a"].getDevConfDisplayVars();return setInterval((function(e){var a;g.info("update rssi chart by interval");var s=Date.now(),r=s-1e3*t.rssiChartPeriod,o=x(r,s,e);e.chartOptions.series.splice(0),(a=e.chartOptions.series).splice.apply(a,[0,o.length].concat(Object(n["a"])(o)))}),t.rssiChartDataSpan,e)}function R(){return{"cache.apiDebuggerResult.scanCodeCurl":function(e,t){D()},"store.devConf":{handler:function(e,t){p["a"].saveDevConf(e)},deep:!0},"store.devConfDisplayVars.toolsBinaryConversion.type":{handler:function(e,t){var a=parseInt(this.store.devConfDisplayVars.toolsBinaryConversion.value,t);this.store.devConfDisplayVars.toolsBinaryConversion.value=a.toString(e)}},"store.devConfDisplayVars.toolsHexTextConversion.type":{handler:function(t,a){var n=this.store.devConfDisplayVars.toolsHexTextConversion.value;this.store.devConfDisplayVars.toolsHexTextConversion.value="hex"===a?e.from(n,"hex").toString():e.from(n).toString("hex")}},"store.devConfDisplayVars.toolsJsonConversion.inline":{handler:function(e,t){try{this.store.devConfDisplayVars.toolsJsonConversion.format=JSON.stringify(JSON.parse(e),null,2)}catch(a){this.store.devConfDisplayVars.toolsJsonConversion.format="".concat(a,"\n").concat(e)}}}}}function V(){return{getComputedNotifyDisplayResultList:function(){var e=r.a.toString(this.cache.notifyDisplayFilterContent).trim().toLowerCase();if(e){var t=new RegExp(e,"gi"),a=["mac","name"],n=this.cache.notifyDisplayResultList.filter((function(t){return a.some((function(a){return r.a.toString(t[a]).toLowerCase().indexOf(e)>-1}))}));return n.map((function(e){var n=Object.assign({},e);return a.forEach((function(e){n[e]=r.a.toString(n[e]).replace(t,(function(e){return'<span class="keyword-lighten">'.concat(e,"</span>")}))})),n}))}return this.cache.notifyDisplayResultList},getComputedScanDisplayResultList:function(){var e=r.a.toString(this.cache.scanDisplayFilterContent).trim().toLowerCase();if(e){var t=new RegExp(e,"gi"),a=["mac","name"],n=this.cache.scanDisplayResultList.filter((function(t){return a.some((function(a){return r.a.toString(t[a]).toLowerCase().indexOf(e)>-1}))}));return n.map((function(e){var n=Object.assign({},e);return a.forEach((function(e){n[e]=r.a.toString(n[e]).replace(t,(function(e){return'<span class="keyword-lighten">'.concat(e,"</span>")}))})),n}))}return this.cache.scanDisplayResultList}}}function I(){setInterval((function(){var e=20,t=p["a"].getCache().scanResultList.splice(0,e);!t||t.length<=0||h.forEach(t,(function(e){var t=h.find(p["a"].getCache().scanDisplayResultList,{mac:e.mac});t?(t.rssi=e.rssi,"(unknown)"===t.name&&(t.name=e.name)):p["a"].getCache().scanDisplayResultList.push(e)}))}),500)}function E(){setInterval((function(){var e,t=20,a=p["a"].getCache().notifyResultList.splice(0,t);if(a&&!(a.length<=0)){var s=p["a"].getCache().notifyDisplayResultList.length;(e=p["a"].getCache().notifyDisplayResultList).splice.apply(e,[s,a.length].concat(Object(n["a"])(a)))}}),500)}function L(){return I(),E(),{data:C(),computed:V(),methods:T(),watch:R()}}t["a"]={notify:S,createVue:L,message:b}}).call(this,a("b639").Buffer)},f599:function(e,t,a){"use strict";a("7db0"),a("4160"),a("caad"),a("b0c0"),a("d3b7"),a("2532"),a("2ca0"),a("159b");var n=a("8144"),s=(a("ac1f"),a("25f0"),a("1276"),{1800:"Generic Access",1811:"Alert Notification Service",1815:"Automation IO","180F":"Battery Service","183B":"Binary Sensor",1810:"Blood Pressure","181B":"Body Composition","181E":"Bond Management Service","181F":"Continuous Glucose Monitoring",1805:"Current Time Service",1818:"Cycling Power",1816:"Cycling Speed and Cadence","180A":"Device Information","183C":"Emergency Configuration","181A":"Environmental Sensing",1826:"Fitness Machine",1801:"Generic Attribute",1808:"Glucose",1809:"Health Thermometer","180D":"Heart Rate",1823:"HTTP Proxy",1812:"Human Interface Device",1802:"Immediate Alert",1821:"Indoor Positioning","183A":"Insulin Delivery",1820:"Internet Protocol Support Service",1803:"Link Loss",1819:"Location and Navigation",1827:"Mesh Provisioning Service",1828:"Mesh Proxy Service",1807:"Next DST Change Service",1825:"Object Transfer Service","180E":"Phone Alert Status Service",1822:"Pulse Oximeter Service",1829:"Reconnection Configuration",1806:"Reference Time Update Service",1814:"Running Speed and Cadence",1813:"Scan Parameters",1824:"Transport Discovery",1804:"User Data","181D":"Weight Scale"});function r(e){var t=parseInt(e.split("-")[0],16).toString(16).toUpperCase();return s[t]||"Unknown Service"}var o={getNameByUuid:r},i={"2A7E":"Aerobic Heart Rate Lower Limit","2A84":"Aerobic Heart Rate Upper Limit","2A7F":"Aerobic Threshold","2A80":"Age","2A5A":"Aggregate","2A43":"Alert Category ID","2A42":"Alert Category ID Bit Mask","2A06":"Alert Level","2A44":"Alert Notification Control Point","2A3F":"Alert Status","2AB3":"Altitude","2A81":"Anaerobic Heart Rate Lower Limit","2A82":"Anaerobic Heart Rate Upper Limit","2A83":"Anaerobic Threshold","2A58":"Analog","2A59":"Analog Output","2A73":"Apparent Wind Direction","2A72":"Apparent Wind Speed","2A01":"Appearance","2AA3":"Barometric Pressure Trend","2A19":"Battery Level","2A1B":"Battery Level State","2A1A":"Battery Power State","2A49":"Blood Pressure Feature","2A35":"Blood Pressure Measurement","2A9B":"Body Composition Feature","2A9C":"Body Composition Measurement","2A38":"Body Sensor Location","2AA4":"Bond Management Control Point","2AA5":"Bond Management Features","2A22":"Boot Keyboard Input Report","2A32":"Boot Keyboard Output Report","2A33":"Boot Mouse Input Report","2B2B":"BSS Control Point","2B2C":"BSS Response","2AA8":"CGM Feature","2AA7":"CGM Measurement","2AAB":"CGM Session Run Time","2AAA":"CGM Session Start Time","2AAC":"CGM Specific Ops Control Point","2AA9":"CGM Status","2B29":"Client Supported Features","2ACE":"Cross Trainer Data","2A5C":"CSC Feature","2A5B":"CSC Measurement","2A2B":"Current Time","2A66":"Cycling Power Control Point","2A65":"Cycling Power Feature","2A63":"Cycling Power Measurement","2A64":"Cycling Power Vector","2A99":"Database Change Increment","2B2A":"Database Hash","2A85":"Date of Birth","2A86":"Date of Threshold Assessment","2A08":"Date Time","2AED":"Date UTC","2A0A":"Day Date Time","2A09":"Day of Week","2A7D":"Descriptor Value Changed","2A7B":"Dew Point","2A56":"Digital","2A57":"Digital Output","2A0D":"DST Offset","2A6C":"Elevation","2A87":"Email Address","2B2D":"Emergency ID","2B2E":"Emergency Text","2A0B":"Exact Time 100","2A0C":"Exact Time 256","2A88":"Fat Burn Heart Rate Lower Limit","2A89":"Fat Burn Heart Rate Upper Limit","2A26":"Firmware Revision String","2A8A":"First Name","2AD9":"Fitness Machine Control Point","2ACC":"Fitness Machine Feature","2ADA":"Fitness Machine Status","2A8B":"Five Zone Heart Rate Limits","2AB2":"Floor Number","2AA6":"Central Address Resolution","2A00":"Device Name","2A04":"Peripheral Preferred Connection Parameters","2A02":"Peripheral Privacy Flag","2A03":"Reconnection Address","2A05":"Service Changed","2A8C":"Gender","2A51":"Glucose Feature","2A18":"Glucose Measurement","2A34":"Glucose Measurement Context","2A74":"Gust Factor","2A27":"Hardware Revision String","2A39":"Heart Rate Control Point","2A8D":"Heart Rate Max","2A37":"Heart Rate Measurement","2A7A":"Heat Index","2A8E":"Height","2A4C":"HID Control Point","2A4A":"HID Information","2A8F":"Hip Circumference","2ABA":"HTTP Control Point","2AB9":"HTTP Entity Body","2AB7":"HTTP Headers","2AB8":"HTTP Status Code","2ABB":"HTTPS Security","2A6F":"Humidity","2B22":"IDD Annunciation Status","2B25":"IDD Command Control Point","2B26":"IDD Command Data","2B23":"IDD Features","2B28":"IDD History Data","2B27":"IDD Record Access Control Point","2B21":"IDD Status","2B20":"IDD Status Changed","2B24":"IDD Status Reader Control Point","2A2A":"IEEE 11073-20601 Regulatory Certification Data List","2AD2":"Indoor Bike Data","2AAD":"Indoor Positioning Configuration","2A36":"Intermediate Cuff Pressure","2A1E":"Intermediate Temperature","2A77":"Irradiance","2AA2":"Language","2A90":"Last Name","2AAE":"Latitude","2A6B":"LN Control Point","2A6A":"LN Feature","2AB1":"Local East Coordinate","2AB0":"Local North Coordinate","2A0F":"Local Time Information","2A67":"Location and Speed Characteristic","2AB5":"Location Name","2AAF":"Longitude","2A2C":"Magnetic Declination","2AA0":"Magnetic Flux Density – 2D","2AA1":"Magnetic Flux Density – 3D","2A29":"Manufacturer Name String","2A91":"Maximum Recommended Heart Rate","2A21":"Measurement Interval","2A24":"Model Number String","2A68":"Navigation","2A3E":"Network Availability","2A46":"New Alert","2AC5":"Object Action Control Point","2AC8":"Object Changed","2AC1":"Object First-Created","2AC3":"Object ID","2AC2":"Object Last-Modified","2AC6":"Object List Control Point","2AC7":"Object List Filter","2ABE":"Object Name","2AC4":"Object Properties","2AC0":"Object Size","2ABF":"Object Type","2ABD":"OTS Feature","2A5F":"PLX Continuous Measurement Characteristic","2A60":"PLX Features","2A5E":"PLX Spot-Check Measurement","2A50":"PnP ID","2A75":"Pollen Concentration","2A2F":"Position 2D","2A30":"Position 3D","2A69":"Position Quality","2A6D":"Pressure","2A4E":"Protocol Mode","2A62":"Pulse Oximetry Control Point","2A78":"Rainfall","2B1D":"RC Feature","2B1E":"RC Settings","2B1F":"Reconnection Configuration Control Point","2A52":"Record Access Control Point","2A14":"Reference Time Information","2B37":"Registered User Characteristic","2A3A":"Removable","2A4D":"Report","2A4B":"Report Map","2AC9":"Resolvable Private Address Only","2A92":"Resting Heart Rate","2A40":"Ringer Control point","2A41":"Ringer Setting","2AD1":"Rower Data","2A54":"RSC Feature","2A53":"RSC Measurement","2A55":"SC Control Point","2A4F":"Scan Interval Window","2A31":"Scan Refresh","2A3C":"Scientific Temperature Celsius","2A10":"Secondary Time Zone","2A5D":"Sensor Location","2A25":"Serial Number String","2B3A":"Server Supported Features","2A3B":"Service Required","2A28":"Software Revision String","2A93":"Sport Type for Aerobic and Anaerobic Thresholds","2AD0":"Stair Climber Data","2ACF":"Step Climber Data","2A3D":"String","2AD7":"Supported Heart Rate Range","2AD5":"Supported Inclination Range","2A47":"Supported New Alert Category","2AD8":"Supported Power Range","2AD6":"Supported Resistance Level Range","2AD4":"Supported Speed Range","2A48":"Supported Unread Alert Category","2A23":"System ID","2ABC":"TDS Control Point","2A6E":"Temperature","2A1F":"Temperature Celsius","2A20":"Temperature Fahrenheit","2A1C":"Temperature Measurement","2A1D":"Temperature Type","2A94":"Three Zone Heart Rate Limits","2A12":"Time Accuracy","2A15":"Time Broadcast","2A13":"Time Source","2A16":"Time Update Control Point","2A17":"Time Update State","2A11":"Time with DST","2A0E":"Time Zone","2AD3":"Training Status","2ACD":"Treadmill Data","2A71":"True Wind Direction","2A70":"True Wind Speed","2A95":"Two Zone Heart Rate Limit","2A07":"Tx Power Level","2AB4":"Uncertainty","2A45":"Unread Alert Status","2AB6":"URI","2A9F":"User Control Point","2A9A":"User Index","2A76":"UV Index","2A96":"VO2 Max","2A97":"Waist Circumference","2A98":"Weight","2A9D":"Weight Measurement","2A9E":"Weight Scale Feature","2A79":"Wind Chill"};function c(e){var t=parseInt(e.split("-")[0],16).toString(16).toUpperCase();return i[t]||"Unknown Characteristics"}var l={getNameByUuid:c},p=a("cc01"),u=(a("d378"),a("3ca3")),d=a("56d7"),f=a("2ef0");function v(e){var t=[n["a"].operation.BROADCASTS,n["a"].operation.READ,n["a"].operation.WRITE_NO_RES,n["a"].operation.WRITE,n["a"].operation.NOTIFY,n["a"].operation.INDICATE,n["a"].operation.AUTHEN,n["a"].operation.EXTENDED],a=[];return f.forEach(t,(function(t,n){1<<n&e&&a.push(t)})),a}function m(e){return f.forEach(e,(function(e){e.name=o.getNameByUuid(e.uuid),f.forEach(e.characteristics,(function(e){if(e.name=l.getNameByUuid(e.uuid),e.propertiesStr=v(e.properties),f.includes(e.propertiesStr,n["a"].operation.NOTIFY)){var t=f.find(e.descriptors,(function(e){return e.uuid.startsWith("00002902")}));t&&(e.notifyHandle=t.handle)}e.readValue="",e.writeValue="",e.notifyStatus=n["a"].notifyStatus.OFF,e.writeValueType=n["a"].writeDataType.HEX}))})),e}function y(e){var t=u["a"].getDevConf(),a=u["a"].getCache();return new Promise((function(n,s){p["a"].getDeviceServiceListByDevConf(t,e).then((function(t){var s=f.cloneDeep(t);d["default"].setObjProperty(a.devicesServiceList,e,m(t)),n(s)})).catch((function(e){return s(e)}))}))}function h(e,t){for(var a=u["a"].getCache(),n=a.devicesServiceList[e],s=0;s<n.length;s++){var r=n[s];r.characteristics=r.characteristics||[];for(var o=0;o<r.characteristics.length;o++){var i=r.characteristics[o];if(i.handle===t)return i}}return null}t["a"]={getCharByHandle:h,getDeviceServiceList:y}},f9e7:function(e,t,a){"use strict";a("99af"),a("7db0"),a("c740"),a("4160"),a("a434"),a("b0c0"),a("159b");var n=a("8144"),s=a("3933"),r=a("cc01"),o=a("3ca3"),i=a("d378"),c=(a("56d7"),a("2ef0")),l=s["a"].genModuleLogger("connect"),p=null;function u(){var e=o["a"].getDevConf();r["a"].getConnectedListByDevConf(e).then((function(e){var t=o["a"].getCache();c.forEach(e.nodes,(function(e){var a=c.find(t.connectedList,{mac:e.id});a?a.chip=e.chipId:t.connectedList.push({name:e.name||"(unknown)",mac:e.id,bdaddrType:e.type,chip:e.chipId})}))}))}function d(){var e=o["a"].getCache(),t=e.connectedList.pop();t&&e.connectedList.push(t)}function f(e){var t=o["a"].getCache(),a=JSON.parse(e.data);if("connected"===a.connectionState)o["a"].listAddOrUpdate(o["a"].getCache().connectedList,{mac:a.handle},{mac:a.handle,chip:a.chipId}),i["a"].notify("chip".concat(a.chipId," 连接").concat(a.handle,"成功"),"操作成功",n["a"].messageType.SUCCESS);else if("disconnected"===a.connectionState){var s=c.findIndex(t.connectedList,{mac:a.handle});if(-1===s)return;t.connectedList.splice(s,1);var r=t.connectedList[s]||t.connectedList[s-1],l=r?r.mac:"0";t.currentConnectedTab=l,d(),i["a"].notify("设备 ".concat(a.handle," 断开连接"),"通知提示",n["a"].messageType.WARNING)}}function v(e){l.error("connect status sse error:",e),i["a"].notify("关闭连接状态SSE，SSE异常: ".concat(e.message||JSON.stringify(e)),"服务异常",n["a"].messageType.ERROR),p.close(),p=null}function m(){var e=o["a"].getDevConf();p=r["a"].openConnectStatusSseByDevConf(e,f,v)}function y(){p&&(p.close(),p=null)}function h(){y(),m()}t["a"]={loadConnectedList:u,openConnectStatusSse:m,closeConnectStatusSse:y,reopenConnectStatusSse:h}}});
//# sourceMappingURL=index.c0a5c48c.js.map